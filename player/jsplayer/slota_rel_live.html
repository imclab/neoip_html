<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<title>UrFastR Live (beta)</title>
<meta name="description" content="UrFastR video player for live and prerecorded video">
<meta name="keywords" content="video, web2.0, p2p, stream, live, player">
<style type="text/css">	
	/* body style for the video fullpage mode - hardcoded for now */
	html, body {
		height	: 100%;
		width	: 100%;
		margin	: 0px;
		overflow: hidden;
		/*background-color: transparent;*/
		background-color: black;
	}
</style>


<body>
<div id="neoip_player_container_id">Place to put player container</div>





 
 



 


 
 
 

 
 




























<script>var a;
if(!("console"in window)||!("firebug"in console))(function(){function b(f){F=f||!F;if(v)v.style.visibility=F?"visible":"hidden";else d()}function c(){b(true);z&&z.focus()}function d(){document.body?e():setTimeout(d,200)}function e(){if(!v){window.onFirebugReady=function(h){window.onFirebugReady=null;var j=h.getElementById("toolbar");j.onmousedown=U;z=h.getElementById("commandLine");C(z,"keydown",V);C(h,Q||M?"keydown":"keypress",R);x=h.getElementById("log");k();q()};var f=g();v=document.createElement("iframe");v.setAttribute("src",
f+"/firebug.html");v.setAttribute("frameBorder","0");v.style.visibility=F?"visible":"hidden";v.style.zIndex="2147483647";v.style.position="fixed";v.style.width="100%";v.style.left="0";v.style.bottom="0";v.style.height="200px";document.body.appendChild(v)}}function g(){for(var f=document.getElementsByTagName("script"),h=0;h<f.length;++h)if(f[h].src.indexOf("firebug.js")!=-1){var j=f[h].src.lastIndexOf("/");return f[h].src.substr(0,j)}return null}function i(){var f=z.value;z.value="";m([W,f],"command");
var h;try{h=eval(f)}catch(j){}console.log(h)}function k(){var f=x.ownerDocument.getElementById("toolbar"),h=v.offsetHeight-(f.offsetHeight+z.offsetHeight);x.style.top=f.offsetHeight+"px";x.style.height=h+"px";z.style.top=v.offsetHeight-z.offsetHeight+"px"}function m(f,h,j){if(x)l(f,h,j);else{N.push([f,h,j]);d()}}function q(){var f=N;N=[];for(var h=0;h<f.length;++h)l(f[h][0],f[h][1],f[h][2])}function l(f,h,j){var o=x.scrollTop+x.offsetHeight>=x.scrollHeight;j||(j=r);j(f,h);if(o)x.scrollTop=x.scrollHeight-
x.offsetHeight}function n(f){var h=G.length?G[G.length-1]:x;h.appendChild(f)}function r(f,h){var j=x.ownerDocument.createElement("div");j.className="logRow"+(h?" logRow-"+h:"");j.innerHTML=f.join("");n(j)}function w(f,h){s(f,h);f=x.ownerDocument.createElement("div");f.className="logGroup";h=x.ownerDocument.createElement("div");h.className="logGroupBox";f.appendChild(h);n(h);G.push(h)}function A(){G.pop()}function s(f,h){var j=[],o=f[0],t=0;if(typeof o!="string"){o="";t=-1}o=p(o);for(var y=0;y<o.length;++y){var B=
o[y];if(B&&typeof B=="object"){var D=f[++t];B.appender(D,j)}else H(B,j)}for(y=t+1;y<f.length;++y){H(" ",j);D=f[y];typeof D=="string"?H(D,j):O(D,j)}m(j,h)}function p(f){for(var h=[],j=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/,o={s:H,d:P,i:P,f:X},t=j.exec(f);t;t=j.exec(f)){var y=t[8]?t[8]:t[5];y=y in o?o[y]:O;var B=t[3]?parseInt(t[3]):t[4]=="."?-1:0;h.push(f.substr(0,t[0][0]=="%"?t.index:t.index+1));h.push({appender:y,precision:B});f=f.substr(t.index+t[0].length)}h.push(f);return h}
function u(f){function h(j){switch(j){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case "'":return"&#39;";case '"':return"&quot;"}return"?"}return String(f).replace(/[<>&"']/g,h)}function E(f){return f+""}function H(f,h){h.push(u(E(f)))}function S(f,h){h.push('<span class="objectBox-null">',u(E(f)),"</span>")}function Y(f,h){h.push('<span class="objectBox-string">&quot;',u(E(f)),"&quot;</span>")}function P(f,h){h.push('<span class="objectBox-number">',u(E(f)),"</span>")}function X(f,
h){h.push('<span class="objectBox-number">',u(E(f)),"</span>")}function Z(f,h){var j=/function ?(.*?)\(/;f=(f=j.exec(E(f)))?f[1]:"function";h.push('<span class="objectBox-function">',u(f),"()</span>")}function O(f,h){try{if(f==undefined)S("undefined",h);else if(f==null)S("null",h);else if(typeof f=="string")Y(f,h);else if(typeof f=="number")P(f,h);else if(typeof f=="function")Z(f,h);else if(f.nodeType==1)$(f,h);else typeof f=="object"?aa(f,h):H(f,h)}catch(j){}}function aa(f,h){f=E(f);var j=/\[object (.*?)\]/;
j=j.exec(f);h.push('<span class="objectBox-object">',j?j[1]:f,"</span>")}function $(f,h){h.push('<span class="objectBox-selector">');h.push('<span class="selectorTag">',u(f.nodeName.toLowerCase()),"</span>");f.id&&h.push('<span class="selectorId">#',u(f.id),"</span>");f.className&&h.push('<span class="selectorClass">.',u(f.className),"</span>");h.push("</span>")}function T(f,h){if(f.nodeType==1){h.push('<div class="objectBox-element">','&lt;<span class="nodeTag">',f.nodeName.toLowerCase(),"</span>");
for(var j=0;j<f.attributes.length;++j){var o=f.attributes[j];o.specified&&h.push('&nbsp;<span class="nodeName">',o.nodeName.toLowerCase(),'</span>=&quot;<span class="nodeValue">',u(o.nodeValue),"</span>&quot;")}if(f.firstChild){h.push('&gt;</div><div class="nodeChildren">');for(j=f.firstChild;j;j=j.nextSibling)T(j,h);h.push('</div><div class="objectBox-element">&lt;/<span class="nodeTag">',f.nodeName.toLowerCase(),"&gt;</span></div>")}else h.push("/&gt;</div>")}else f.nodeType==3&&h.push('<div class="nodeText">',
u(f.nodeValue),"</div>")}function C(f,h,j){document.all?f.attachEvent("on"+h,j):f.addEventListener(h,j,false)}function I(f,h,j){document.all?f.detachEvent("on"+h,j):f.removeEventListener(h,j,false)}function ba(f){if(document.all)f.cancelBubble=true;else f.stopPropagation()}function ca(f,h,j){var o=[],t=h.lastIndexOf("/");h=t==-1?h:h.substr(t+1);o.push('<span class="errorMessage">',f,"</span>",'<div class="objectBox-sourceLink">',h," (line ",j,")</div>");m(o,"error")}function R(f){if(f.keyCode==123)b();
else if((f.keyCode==108||f.keyCode==76)&&f.shiftKey&&(f.metaKey||f.ctrlKey))c();else return;ba(f)}function U(){if(!(M||da)){C(document,"mousemove",J);C(document,"mouseup",K);for(var f=0;f<frames.length;++f){C(frames[f].document,"mousemove",J);C(frames[f].document,"mouseup",K)}}}function J(f){var h=document.all?f.srcElement.ownerDocument.parentWindow:f.target.ownerDocument.defaultView;f=f.clientY;if(h!=h.parent)f+=h.frameElement?h.frameElement.offsetTop:0;h=v.offsetTop+v.clientHeight;h=h-f;v.style.height=
h+"px";k()}function K(){I(document,"mousemove",J);I(document,"mouseup",K);for(var f=0;f<frames.length;++f){I(frames[f].document,"mousemove",J);I(frames[f].document,"mouseup",K)}}function V(f){if(f.keyCode==13)i();else if(f.keyCode==27)z.value=""}window.console={log:function(){s(arguments,"")},debug:function(){s(arguments,"debug")},info:function(){s(arguments,"info")},warn:function(){s(arguments,"warning")},error:function(){s(arguments,"error")},assert:function(f,h){if(!f){for(var j=[],o=1;o<arguments.length;++o)j.push(arguments[o]);
s(j.length?j:["Assertion Failure"],"error");throw h?h:"Assertion Failure";}},dir:function(f){var h=[],j=[];for(var o in f)try{j.push([o,f[o]])}catch(t){}j.sort(function(B,D){return B[0]<D[0]?-1:1});h.push("<table>");for(f=0;f<j.length;++f){o=j[f][0];var y=j[f][1];h.push("<tr>",'<td class="propertyNameCell"><span class="propertyName">',u(o),"</span></td>",'<td><span class="propertyValue">');O(y,h);h.push("</span></td></tr>")}h.push("</table>");m(h,"dir")},dirxml:function(f){var h=[];T(f,h);m(h,"dirxml")},
group:function(){m(arguments,"group",w)},groupEnd:function(){m(arguments,"",A)},time:function(f){L[f]=(new Date).getTime()},timeEnd:function(f){if(f in L){var h=(new Date).getTime()-L[f];s([f+":",h+"ms"]);delete L[f]}},count:function(){this.warn(["count() not supported."])},trace:function(){this.warn(["trace() not supported."])},profile:function(){this.warn(["profile() not supported."])},profileEnd:function(){},clear:function(){x.innerHTML=""},open:function(){b(true)},close:function(){F&&b()}};var v=
null,x=null,z=null,F=false,N=[],G=[],L={},W=">>> ";navigator.userAgent.indexOf("Firefox");var Q=navigator.userAgent.indexOf("MSIE")!=-1,da=navigator.userAgent.indexOf("Opera")!=-1,M=navigator.userAgent.indexOf("AppleWebKit")!=-1;window.onerror=ca;C(document,Q||M?"keydown":"keypress",R);document.documentElement.getAttribute("debug")=="true"&&b(true)})();this.JSON||(JSON={});
(function(){function b(l){return l<10?"0"+l:l}function c(l){g.lastIndex=0;return g.test(l)?'"'+l.replace(g,function(n){var r=m[n];return typeof r==="string"?r:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function d(l,n){var r,w,A=i,s,p=n[l];if(p&&typeof p==="object"&&typeof p.toJSON==="function")p=p.toJSON(l);if(typeof q==="function")p=q.call(n,l,p);switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";i+=k;s=[];if(Object.prototype.toString.apply(p)==="[object Array]"){w=p.length;for(l=0;l<w;l+=1)s[l]=d(l,p)||"null";n=s.length===0?"[]":i?"[\n"+i+s.join(",\n"+i)+"\n"+A+"]":"["+s.join(",")+"]";i=A;return n}if(q&&typeof q==="object"){w=q.length;for(l=0;l<w;l+=1){r=q[l];if(typeof r==="string")if(n=d(r,p))s.push(c(r)+(i?": ":":")+n)}}else for(r in p)if(Object.hasOwnProperty.call(p,r))if(n=d(r,p))s.push(c(r)+(i?": ":":")+n);n=s.length===0?"{}":i?"{\n"+i+s.join(",\n"+i)+
"\n"+A+"}":"{"+s.join(",")+"}";i=A;return n}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
g=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,k,m={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},q;if(typeof JSON.stringify!=="function")JSON.stringify=function(l,n,r){var w;k=i="";if(typeof r==="number")for(w=0;w<r;w+=1)k+=" ";else if(typeof r==="string")k=r;if((q=n)&&typeof n!=="function"&&(typeof n!=="object"||typeof n.length!=="number"))throw new Error("JSON.stringify");return d("",
{"":l})};if(typeof JSON.parse!=="function")JSON.parse=function(l,n){function r(w,A){var s,p,u=w[A];if(u&&typeof u==="object")for(s in u)if(Object.hasOwnProperty.call(u,s)){p=r(u,s);if(p!==undefined)u[s]=p;else delete u[s]}return n.call(w,A,u)}e.lastIndex=0;if(e.test(l))l=l.replace(e,function(w){return"\\u"+("0000"+w.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){l=eval("("+l+")");return typeof n==="function"?r({"":l},""):l}throw new SyntaxError("JSON.parse");}})();if(typeof neoip=="undefined")var neoip={};neoip.core_t=function(){};neoip.core=new neoip.core_t;neoip.core.isIE=navigator.appName.indexOf("Microsoft")!=-1;neoip.core.isWebKit=navigator.userAgent.indexOf("WebKit")!=-1;
neoip.core_t.prototype.object_clone=function(b,c){if(typeof b!="object")return b;if(b==null)return b;var d={};if(c==true)for(var e in b)d[e]=neoip.object_clone(b[e],c);else for(e in b)d[e]=b[e];return d};neoip.core_t.prototype.build_nonce_str=function(b){for(var c="",d=0;d<b;d++){var e=Math.floor(Math.random()*62);c+=e<26?String.fromCharCode(e+"A".charCodeAt(0)):e<52?String.fromCharCode(e-26+"a".charCodeAt(0)):String.fromCharCode(e-52+"0".charCodeAt(0))}return c};
neoip.core_t.prototype.dom_event_listener=function(b,c,d){if(b.addEventListener){b.addEventListener(c,d,false);return true}else return b.attachEvent?b.attachEvent("on"+c,d):false};neoip.basic_cb_t=function(b,c){var d=c||window;return function(){b.call(d)}};a=neoip.core_t.prototype;a.build_xmlhttp_obj=function(){var b=null;try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){b=null}}if(b==null)b=new XMLHttpRequest;return b};
a.download_file_insync=function(b,c){var d=this.build_xmlhttp_obj();if(c==true){b+=b.indexOf("?")==-1?"?":"&";b+="nocache_workaround="+Math.floor(Math.random()*999999)}d.open("GET",b,false);d.send(null);if(d.status!=200)return null;return d.responseText};a.cookie_write=function(b,c,d,e){b=b+"="+c;if(d){c=new Date;c.setTime(c.getTime()+d*24*60*60*1E3);b+="; expires="+c.toGMTString()}if(e==null)e=window.location.pathname;b+="; path="+e;console.info("cookie_str="+b);document.cookie=b};
a.cookie_read=function(b){b=b+"=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];e.charAt(0)==" ";)e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null};a.cookie_delete=function(b){createCookie(b,"",-1)};a.doc_urivar_get=function(b){var c=window.location.search.substring(1);c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==b)return e[1]}return null};
a.doc_urivar_arr=function(){var b={},c=document.location.search.substring(1);c=c.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("="),g=e[0];e=e[1];b[g]=e}return b};a.is_absolute_uri=function(b){if(/^http:\/\//.test(b))return true;if(/^https:\/\//.test(b))return true;if(/^ftp:\/\//.test(b))return true;return false};a.is_absolute_path=function(b){if(/^\//.test(b))return true;return false};a.dirname=function(b){return b.replace(/([^\/]*)$/,"")};
a.to_absolute_uri=function(b){if(this.is_absolute_uri(b))return b;if(this.is_absolute_path(b)){var c=/(.*:\/\/.*?)\//(location.href);c=c[1];return c+b}c=location.href;for(c=c.substring(0,c.lastIndexOf("/"));/^\.\./.test(b);){c=c.substring(0,c.lastIndexOf("/"));b=b.substring(3)}return c+"/"+b};a.doscramble_uri=function(b){return b};neoip.objembed_initmon_t=function(){console.info("enter");this.m_cur_delay=100;this.m_end_delay=5E3};
neoip.objembed_initmon_t.prototype.destructor=function(){if(this.m_expire_timeout){clearTimeout(this.m_expire_timeout);this.m_expire_timeout=null}};neoip.objembed_initmon_t.prototype.start=function(b,c,d){console.info("enter html_id="+b+" obj_fcts="+c);this.m_html_id=b;this.m_obj_fcts=c instanceof Array?c:[c];this.m_callback=d;this.m_expire_timeout=setTimeout(neoip.basic_cb_t(this._expire_timeout_cb,this),this.m_cur_delay)};
neoip.objembed_initmon_t.prototype._emdeb_do_exist=function(){var b=document.getElementById(this.m_html_id);if(b==undefined)return false;for(var c=0;c<this.m_obj_fcts.length;c++)if(typeof b[this.m_obj_fcts[c]]!=="function")return false;return true};
neoip.objembed_initmon_t.prototype._expire_timeout_cb=function(){clearInterval(this.m_expire_timeout);this.m_expire_timeout=null;if(this._emdeb_do_exist())this.m_callback();else{this.m_cur_delay*=2;this.m_cur_delay=Math.min(this.m_cur_delay,this.m_end_delay);this.m_expire_timeout=setTimeout(neoip.basic_cb_t(this._expire_timeout_cb,this),this.m_cur_delay)}};neoip.objembed_initmon_cb_t=function(b,c,d){var e=c||window;return function(){b.call(e,this,d)}};
var neoip_base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",encode_safe:function(b){var c="",d,e,g,i,k,m,q=0;for(b=this._utf8_encode(b);q<b.length;){d=b.charCodeAt(q++);e=b.charCodeAt(q++);g=b.charCodeAt(q++);i=d>>2;d=(d&3)<<4|e>>4;k=(e&15)<<2|g>>6;m=g&63;if(isNaN(e))k=m=64;else if(isNaN(g))m=64;c=c+this._keyStr.charAt(i)+this._keyStr.charAt(d)+this._keyStr.charAt(k)+this._keyStr.charAt(m)}return c},decode_safe:function(b){var c="",d,e,g,i,k,m=0;for(b=b.replace(/[^A-Za-z0-9\-\_\=]/g,
"");m<b.length;){d=this._keyStr.indexOf(b.charAt(m++));e=this._keyStr.indexOf(b.charAt(m++));i=this._keyStr.indexOf(b.charAt(m++));k=this._keyStr.indexOf(b.charAt(m++));d=d<<2|e>>4;e=(e&15)<<4|i>>2;g=(i&3)<<6|k;c+=String.fromCharCode(d);if(i!=64)c+=String.fromCharCode(e);if(k!=64)c+=String.fromCharCode(g)}return c=this._utf8_decode(c)},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");for(var c="",d=0;d<b.length;d++){var e=b.charCodeAt(d);if(e<128)c+=String.fromCharCode(e);else{if(e>127&&e<2048)c+=
String.fromCharCode(e>>6|192);else{c+=String.fromCharCode(e>>12|224);c+=String.fromCharCode(e>>6&63|128)}c+=String.fromCharCode(e&63|128)}}return c},_utf8_decode:function(b){for(var c="",d=0,e=c1=c2=0;d<b.length;){e=b.charCodeAt(d);if(e<128){c+=String.fromCharCode(e);d++}else if(e>191&&e<224){c2=b.charCodeAt(d+1);c+=String.fromCharCode((e&31)<<6|c2&63);d+=2}else{c2=b.charCodeAt(d+1);c3=b.charCodeAt(d+2);c+=String.fromCharCode((e&15)<<12|(c2&63)<<6|c3&63);d+=3}}return c}};
neoip.nested_uri_builder_t=function(){this.m_dupuri_arr=[];this.m_var_arr=[]};a=neoip.nested_uri_builder_t.prototype;a.destructor=function(){};a.inner_uri=function(b){this.m_inner_uri=neoip.core.to_absolute_uri(b)};a.outter_uri=function(b){this.m_outter_uri=b};a.set_var=function(b,c){if(b=="dupuri")this.m_dupuri_arr.push(c);else if(b=="subfile_path"){this.m_var_arr.subfile_level=c.split("/").length-1;this.m_subfile_path=c}else this.m_var_arr[b]=c};
a.set_var_arr=function(b){for(var c in b)this.set_var(c,b[c])};a._is_sane_internal=function(){if(!this.m_outter_uri)throw new Error("No outter_uri");if(!this.m_inner_uri)throw new Error("No inner_uri");};a.is_sane=function(){try{this._is_sane_internal()}catch(b){console.log("nested_uri_build_t not sane due to "+b);return false}return true};
a.to_string=function(){var b="";console.assert(this.is_sane());b+=this.m_outter_uri+"/";if(this.m_var_arr.mod)b+=this.m_var_arr.mod+"/";for(var c in this.m_var_arr)if(c!="mod")if(c.indexOf("neoip_metavar_")!=0){b+="*"+c+"*";b+=c=="http_peersrc_uri"?neoip_base64.encode_safe(this.m_var_arr[c]):this.m_var_arr[c];b+="/"}for(var d in this.m_dupuri_arr){b+="*dupuri*";b+=neoip_base64.encode_safe(this.m_dupuri_arr[d]);b+="/"}d=this.m_inner_uri.indexOf("?");b+=d!=-1?this.m_inner_uri.substr(0,d):this.m_inner_uri;
if(this.m_subfile_path)b+=this.m_subfile_path;if(d!=-1)b+=this.m_inner_uri.substr(d,this.m_inner_uri.length);for(c in this.m_var_arr)if(c.indexOf("neoip_metavar_")==0){b+=b.indexOf("?")==-1?"?":"&";b+=c+"="+escape(this.m_var_arr[c])}return b=neoip.core.doscramble_uri(b)};if(typeof deconcept=="undefined")var deconcept={};if(typeof deconcept.util=="undefined")deconcept.util={};if(typeof deconcept.SWFObjectUtil=="undefined")deconcept.SWFObjectUtil={};
deconcept.SWFObject=function(b,c,d,e,g,i,k,m,q,l){if(document.getElementById){this.DETECT_KEY=l?l:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];b&&this.setAttribute("swf",b);c&&this.setAttribute("id",c);d&&this.setAttribute("width",d);e&&this.setAttribute("height",e);g&&this.setAttribute("version",new deconcept.PlayerVersion(g.toString().split(".")));this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();
if(!window.opera&&document.all&&this.installedVer.major>7)deconcept.SWFObject.doPrepUnload=true;i&&this.addParam("bgcolor",i);c=k?k:"high";this.addParam("quality",c);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var n=m?m:window.location;this.setAttribute("xiRedirectUrl",n);this.setAttribute("redirectUrl","");q&&this.setAttribute("redirectUrl",q)}};
deconcept.SWFObject.prototype={useExpressInstall:function(b){this.xiSWFPath=!b?"expressinstall.swf":b;this.setAttribute("useExpressInstall",true)},setAttribute:function(b,c){this.attributes[b]=c},getAttribute:function(b){return this.attributes[b]},addParam:function(b,c){this.params[b]=c},getParams:function(){return this.params},addVariable:function(b,c){this.variables[b]=c},getVariable:function(b){return this.variables[b]},getVariables:function(){return this.variables},getVariablePairs:function(){var b=
[],c,d=this.getVariables();for(c in d)b[b.length]=c+"="+d[c];return b},getSWFHTML:function(){var b="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}b='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"';b+=
' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var c=this.getParams();for(var d in c)b+=[d]+'="'+c[d]+'" ';var e=this.getVariablePairs().join("&");if(e.length>0)b+='flashvars="'+e+'"';b+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}b='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+
'" style="'+this.getAttribute("style")+'">';b+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var g=this.getParams();for(d in g)b+='<param name="'+d+'" value="'+g[d]+'" />';var i=this.getVariablePairs().join("&");if(i.length>0)b+='<param name="flashvars" value="'+i+'" />';b+="</object>"}return b},write:function(b){if(this.getAttribute("useExpressInstall")){var c=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(c)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",
true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var d=typeof b=="string"?document.getElementById(b):b;d.innerHTML=this.getSWFHTML();return true}else this.getAttribute("redirectUrl")!=""&&document.location.replace(this.getAttribute("redirectUrl"));
return false}};
deconcept.SWFObjectUtil.getPlayerVersion=function(){var b=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var c=navigator.plugins["Shockwave Flash"];if(c&&c.description)b=new deconcept.PlayerVersion(c.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){c=1;for(var d=3;c;)try{d++;c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+d);b=new deconcept.PlayerVersion([d,
0,0])}catch(e){c=null}}else{try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(g){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");b=new deconcept.PlayerVersion([6,0,21]);c.AllowScriptAccess="always"}catch(i){if(b.major==6)return b}try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(k){}}if(c!=null)b=new deconcept.PlayerVersion(c.GetVariable("$version").split(" ")[1].split(","))}return b};
deconcept.PlayerVersion=function(b){this.major=b[0]!=null?parseInt(b[0]):0;this.minor=b[1]!=null?parseInt(b[1]):0;this.rev=b[2]!=null?parseInt(b[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(b){if(this.major<b.major)return false;if(this.major>b.major)return true;if(this.minor<b.minor)return false;if(this.minor>b.minor)return true;if(this.rev<b.rev)return false;return true};
deconcept.util={getRequestParameter:function(b){var c=document.location.search||document.location.hash;if(b==null)return c;if(c){var d=c.substring(1).split("&");for(c=0;c<d.length;c++)if(d[c].substring(0,d[c].indexOf("="))==b)return d[c].substring(d[c].indexOf("=")+1)}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){for(var b=document.getElementsByTagName("OBJECT"),c=b.length-1;c>=0;c--){b[c].style.display="none";for(var d in b[c])if(typeof b[c][d]=="function")b[c][d]=function(){}}};
if(deconcept.SWFObject.doPrepUnload)if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}if(!document.getElementById&&document.all)document.getElementById=function(b){return document.all[b]};
var getQueryParamValue=deconcept.util.getRequestParameter,FlashObject=deconcept.SWFObject,SWFObject=deconcept.SWFObject;
neoip.xdomrpc_t=function(b,c,d,e,g,i,k,m,q,l,n,r,w){this.m_obj_id=neoip_xdomrpc_cb_new_obj_id();this.m_callback=c;this.m_rpc_url=b;this.m_expire_delay=6E3;this.m_expire_timeout=setTimeout(neoip.basic_cb_t(this._expire_timeout_cb,this),this.m_expire_delay);neoip_xdomrpc_cb_doregister(this);b=this.m_rpc_url;b+="?obj_id="+this.m_obj_id;b+="&js_callback=neoip_xdomrpc_cb_callback_from_server";b+="&method_name="+escape(d);if(e!=null)b+="&arg0="+escape(e);if(g!=null)b+="&arg1="+escape(g);if(i!=null)b+="&arg2="+
escape(i);if(k!=null)b+="&arg3="+escape(k);if(m!=null)b+="&arg4="+escape(m);if(q!=null)b+="&arg5="+escape(q);if(l!=null)b+="&arg6="+escape(l);if(n!=null)b+="&arg7="+escape(n);if(r!=null)b+="&arg8="+escape(r);if(w!=null)b+="&arg9="+escape(w);this._call_uri=neoip.core.doscramble_uri(b);this.m_zerotimer_init=setTimeout(neoip.basic_cb_t(this._zerotimer_init_cb,this),0);this.m_script_monitor=neoip.core.isIE||neoip.core.isWebKit};a=neoip.xdomrpc_t.prototype;
a.destructor=function(){this.m_zerotimer_init&&clearTimeout(this.m_zerotimer_init);this.m_expire_timeout&&clearTimeout(this.m_expire_timeout);neoip_xdomrpc_cb_unregister(this);var b="neoip_xdomrpc_script_"+this.m_obj_id;this.m_script_monitor?this._dtor_all_script_monitor(b):this._dtor_all_script_default(b)};
a._zerotimer_init_cb=function(){var b=this._call_uri;clearTimeout(this.m_zerotimer_init);this.m_zerotimer_init=null;var c=this._get_root_elem(),d="neoip_xdomrpc_script_"+this.m_obj_id,e="neoip_xdomrpc_script_reply_var_"+this.m_obj_id,g=document.createElement("script");g.setAttribute("id",d+"_pre");g.text="var "+e+"=null;";c.appendChild(g);g=document.createElement("script");g.setAttribute("src",b);g.setAttribute("id",d+"_call");c.appendChild(g);this.m_script_monitor?this._ctor_post_script_monitor(g,
d):this._ctor_post_script_default(g,d)};a._get_root_elem=function(){var b;return b=document.getElementsByTagName("head")[0]};a._ctor_post_script_default=function(b,c){b=this._get_root_elem();var d=document.createElement("script");d.setAttribute("id",c+"_post");d.text="neoip_xdomrpc_cb_callback_from_server("+this.m_obj_id+");";b.appendChild(d)};
a._dtor_all_script_default=function(b){var c=this._get_root_elem();try{c.removeChild(document.getElementById(b+"_pre"))}catch(d){}try{c.removeChild(document.getElementById(b+"_call"))}catch(e){}try{c.removeChild(document.getElementById(b+"_post"))}catch(g){}};
a._ctor_post_script_monitor=function(b){function c(d){var e=d;return function(){if(this.readyState==null||this.readyState=="loaded"||this.readyState=="complete")neoip_xdomrpc_cb_callback_from_server(e)}}b.onreadystatechange=c(this.m_obj_id);b.onload=c(this.m_obj_id);b.onerror=c(this.m_obj_id)};
a._dtor_all_script_monitor=function(b){var c=this._get_root_elem();function d(e,g,i){var k=e,m=g,q=i;return function(){var l=document.getElementById(k),n=l.readyState;if(n!=null&&n!="loaded"&&n!="complete")setTimeout(q(k,m,q),1E3);else try{m.removeChild(l)}catch(r){}}}setTimeout(d(b+"_pre",c,d),0);setTimeout(d(b+"_call",c,d),0)};
a._expire_timeout_cb=function(){clearInterval(this.m_expire_timeout);this.m_expire_timeout=null;var b={code:-1,string:"expired after "+this.m_expire_delay};this.callback_cb(this.m_obj_id,b,null)};a.callback_cb=function(b,c,d){console.assert(this.m_obj_id==b);this.m_callback?this.m_callback(c,d):this.destructor()};neoip.xdomrpc_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};var neoip_xdomrpc_cb_arr=[];
function neoip_xdomrpc_cb_new_obj_id(){var b;do b=Math.floor(Math.random()*65536);while(neoip_xdomrpc_cb_arr[b]!=null);return b}function neoip_xdomrpc_cb_doregister(b){console.assert(!neoip_xdomrpc_cb_arr[b.m_obj_id]);neoip_xdomrpc_cb_arr[b.m_obj_id]=b}function neoip_xdomrpc_cb_unregister(b){console.assert(neoip_xdomrpc_cb_arr[b.m_obj_id]);delete neoip_xdomrpc_cb_arr[b.m_obj_id];console.assert(!neoip_xdomrpc_cb_arr[b.m_obj_id])}
function neoip_xdomrpc_cb_callback_from_server(b){var c=eval("neoip_xdomrpc_script_reply_var_"+b),d=neoip_xdomrpc_cb_arr[b];if(d!=null){console.assert(d!=null);eval("delete neoip_xdomrpc_script_reply_var_"+b);c==null?d.callback_cb(b,{code:-1,string:"Server Unreachable"},null):d.callback_cb(b,c.fault,c.returned_val)}}
neoip.apps_detect_t=function(b,c,d,e,g){this.m_callback=e;this.m_suffix_name=b;this.m_first_port=c;this.m_last_port=d;this.m_options=g!=null?neoip.core.object_clone(g):{};this.m_hostname="127.0.0.1";if(this.m_options.hostname!=undefined)this.m_hostname=this.m_options.hostname;this.m_max_concurrent=1;if(this.m_options.max_concurrent!=undefined)this.m_max_concurrent=this.m_options.max_concurrent;this.m_expire_delay=1E4;this.m_expire_timeout=setTimeout(neoip.basic_cb_t(this._expire_timeout_cb,this),
this.m_expire_delay);this.m_xdomrpc_arr=[];for(b=this.m_first_port;b<=this.m_last_port;b++)this.m_xdomrpc_arr[b]="todo";this._launch_next_probe()};a=neoip.apps_detect_t.prototype;a.destructor=function(){for(var b in this.m_xdomrpc_arr)if(typeof this.m_xdomrpc_arr[b]=="object"){this.m_xdomrpc_arr[b].destructor();this.m_xdomrpc_arr[b]=null}if(this.m_expire_timeout){clearTimeout(this.m_expire_timeout);this.m_expire_timeout=null}};a.suffix_name=function(){return this.m_suffix_name};a.first_port=function(){return this.m_first_port};
a.last_port=function(){return this.m_last_port};a.hostname=function(){return this.m_hostname};a.options=function(){return this.m_options};
a._launch_next_probe=function(){var b=0,c=0;for(var d in this.m_xdomrpc_arr){this.m_xdomrpc_arr[d]=="done"&&c++;typeof this.m_xdomrpc_arr[d]=="object"&&b++}console.assert(b<=this.m_max_concurrent);if(c==this.m_last_port-this.m_first_port+1){b={present:false};neoip_apps_detect_arr[this.m_suffix_name]=b;this.m_callback&&this.m_callback("absent")}else{console.assert(b<=this.m_max_concurrent);for(d in this.m_xdomrpc_arr)if(this.m_xdomrpc_arr[d]=="todo"){if(b>=this.m_max_concurrent)break;c="http://"+this.m_hostname+
":"+d+"/neoip_"+this.m_suffix_name+"_appdetect_jsrest.js";this.m_xdomrpc_arr[d]=new neoip.xdomrpc_t(c,neoip.xdomrpc_cb_t(this._xdomrpc_cb,this,d),"probe_apps");b++}}};a._xdomrpc_cb=function(b,c,d,e){b=c;this.m_xdomrpc_arr[b].destructor();this.m_xdomrpc_arr[b]="done";if(d==null){d={};d.outter_uri="http://"+this.m_hostname+":"+b;d.version=e;d.present=true;neoip_apps_detect_arr[this.m_suffix_name]=d;this.m_callback&&this.m_callback("found")}else this._launch_next_probe()};
a._expire_timeout_cb=function(){neoip_apps_detect_arr[this.m_suffix_name]={present:false};this.m_callback&&this.m_callback("expired after "+this.m_expire_delay+"-msec")};neoip.apps_detect_cb_t=function(b,c,d){var e=c||window;return function(g){b.call(e,this,d,g)}};var neoip_apps_detect_arr=[];neoip.apps_present=function(b){if(neoip_apps_detect_arr[b]==null)return false;return neoip_apps_detect_arr[b].present};neoip.apps_version=function(b){console.assert(neoip.apps_present(b));return neoip_apps_detect_arr[b].version};
neoip.apps_version_check=function(b,c){b=neoip.apps_version(b);var d=parseInt(b.split(".")[0],10),e=parseInt(c.split(".")[0],10);if(d<e)return false;d=parseInt(b.split(".")[1],10);e=parseInt(c.split(".")[1],10);if(d<e)return false;b=parseInt(b.split(".")[2],10);c=parseInt(c.split(".")[2],10);if(b<c)return false;return true};neoip.outter_uri=function(b){console.assert(neoip.apps_present(b));return neoip_apps_detect_arr[b].outter_uri};neoip.apps_detect_wikidbg_t=function(){};
neoip.apps_detect_wikidbg=new neoip.apps_detect_wikidbg_t;neoip.apps_detect_wikidbg_t.prototype.main_cb=function(b,c,d){if(typeof d=="string")d=document.getElementById(d);neoip.wikidbg_subelem_delete(d);d=new neoip.wikidbg_elem_t(d);if(c=="page")return this._page_cb(b,c,d);else throw"unknown keyword "+c;};
neoip.apps_detect_wikidbg_t.prototype._page_cb=function(b,c,d){b=d.table().tbody();for(var e in neoip_apps_detect_arr){if(neoip.apps_present(e)){c=" <font color='green'>HAS been found</font> -";c+=" version "+neoip.apps_version(e);c+=" with outter_uri of "+neoip.outter_uri(e)}else{c="<font color='red'>HAS NOT</font> been found";c+=" running on your computer."}b.clone().tr().td().bold("neoip-"+e).up(2).td().span().inner_html(": "+c)}};
neoip.webpack_detect_t=function(b,c){this.m_callback=b;this.m_apps_params={oload:{first_port:4550,last_port:4553,min_version:"0.0.1",options:null},casto:{first_port:4560,last_port:4563,min_version:"0.0.1",options:null},casti:{first_port:4570,last_port:4573,min_version:"0.0.1",options:{hostname:"dedixl.jetienne.com"}}};if(c)this.m_apps_params=c;this.m_apps_detects=[];for(var d in this.m_apps_params){b=this.m_apps_params[d];b=new neoip.apps_detect_t(d,b.first_port,b.last_port,neoip.apps_detect_cb_t(this._apps_detect_cb,
this),b.options);this.m_apps_detects.push(b)}this._goto_state("inprobing")};neoip.webpack_detect_t.prototype.destructor=function(){for(;this.m_apps_detects.length>0;){this.m_apps_detects[0].destructor();this.m_apps_detects.splice(0,1)}};
neoip.webpack_detect_t.prototype._apps_detect_cb=function(b){var c=b.suffix_name();for(var d in this.m_apps_detects)if(b==this.m_apps_detects[d]){this.m_apps_detects[d].destructor();this.m_apps_detects.splice(d,1)}if(!(this.m_apps_detects.length>0)){for(c in this.m_apps_params)if(!neoip.apps_present(c)){this._goto_state("toinstall");return}for(c in this.m_apps_params){b=this.m_apps_params[c].min_version;if(!neoip.apps_version_check(c,b)){this._goto_state("toupgrade");return}}this._goto_state("installed")}};
neoip.webpack_detect_t.prototype._goto_state=function(b){b!="inprobing"&&this.m_callback(b)};neoip.webpack_detect_cb_t=function(b,c,d){var e=c||window;return function(g){b.call(e,this,d,g)}};neoip.wikidbg_subelem_delete=function(b){for(;b.childNodes.length;){var c=b.childNodes[0];b.removeChild(c)}};
neoip.wikidbg_dump_object=function(b,c){if(typeof c!="object"){var d=document.createTextNode("["+typeof c+"] - "+c);b.appendChild(d)}else if(c==null){d=document.createTextNode("null");b.appendChild(d)}else{d=document.createTextNode("["+typeof c+"]");b.appendChild(d);d=document.createElement("ul");for(var e in c)if(typeof c[e]!="function"){var g=document.createElement("li");g.appendChild(document.createTextNode(e+": "));neoip.wikidbg_dump_object(g,c[e]);d.appendChild(g)}b.appendChild(d)}};
neoip.wikidbg_periodic=function(b,c,d,e,g){c.main_cb(d,e,g);function i(){neoip.wikidbg_periodic(b,c,d,e,g)}setTimeout(i,b)};neoip.wikidbg_elem_t=function(b){this.m_dom_elem=b};a=neoip.wikidbg_elem_t.prototype;a._append_child_elem=function(b){this.m_dom_elem.appendChild(b);this.m_dom_elem=b;return this};a._append_child_create=function(b){b=document.createElement(b);return this._append_child_elem(b)};a.ul=function(){return this._append_child_create("ul")};a.ol=function(){return this._append_child_create("ol")};
a.li=function(){return this._append_child_create("li")};a.table=function(){return this._append_child_create("table")};a.tbody=function(){return this._append_child_create("tbody")};a.thead=function(){return this._append_child_create("thead")};a.tr=function(){return this._append_child_create("tr")};a.td=function(){return this._append_child_create("td")};a.span=function(){return this._append_child_create("span")};a.text=function(b){b=document.createTextNode(b);return this._append_child_elem(b)};
a.inner_html=function(b){this.m_dom_elem.innerHTML=b};a.bold=function(b){var c=this._append_child_create("b");if(typeof b=="undefined")return c;return c.text(b).up()};a.up=function(b){if(typeof b=="undefined")b=1;for(var c=0;c<b;c++)this.m_dom_elem=this.m_dom_elem.parentNode;return this};a.clone=function(){return neoip.core.object_clone(this)};
neoip.geoLocalize=function(b){var c=document.createElement("script");c.src="http://www.google.com/jsapi";var d=document.getElementsByTagName("head")[0],e=false;c.onload=c.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){e=true;b&&b(google.loader.ClientLocation);c.onload=c.onreadystatechange=null;d.removeChild(c)}};d.appendChild(c)};
neoip.casti_ctrl_t=function(b){this.m_callback=b;this.m_http_peersrc_uri=this.m_mdata_srv_uri=this.m_scasti_mod=this.m_scasti_uri=this.m_cast_privtext=this.m_cast_name=this.m_webdetect_uri=null;this.m_web2srv_obj={};this.m_swarm_state="stopped";this.m_refresh_xdomrpc=null;this.m_refresh_delay=3;this.m_refresh_timeout=null};a=neoip.casti_ctrl_t.prototype;
a.destructor=function(){console.info("casti_ctrl_t: destructor");if(this.m_refresh_xdomrpc){this.m_refresh_xdomrpc.destructor();this.m_refresh_xdomrpc=null}if(this.m_refresh_timeout){clearTimeout(this.m_refresh_timeout);this.m_refresh_timeout=null}};a.webdetect_uri=function(b){this.m_webdetect_uri=b;return this};a.cast_name=function(b){this.m_cast_name=b;return this};a.cast_privtext=function(b){this.m_cast_privtext=b;return this};a.scasti_uri=function(b){this.m_scasti_uri=b;return this};
a.scasti_mod=function(b){this.m_scasti_mod=b;return this};a.mdata_srv_uri=function(b){this.m_mdata_srv_uri=b;return this};a.http_peersrc_uri=function(b){this.m_http_peersrc_uri=b;return this};a.refresh_period=function(b){this.m_refresh_delay=b;return this};a.is_recording=function(){return this.m_refresh_timeout!=null};a.swarm_state=function(){return this.m_swarm_state};a.cast_privhash=function(){return this.m_cast_privhash};a.web2srv_obj=function(){return this.m_web2srv_obj};
a.start_recording=function(){if(!this.is_recording())this.m_refresh_timeout=setTimeout(neoip.basic_cb_t(this._refresh_timeout_cb,this),0)};
a.stop_recording=function(){if(this.is_recording()){this.m_swarm_state="stopped";clearTimeout(this.m_refresh_timeout);this.m_refresh_timeout=null;var b=this.m_webdetect_uri+"/neoip_casti_ctrl_wpage_jsrest.js";new neoip.xdomrpc_t(b,null,"release_stream",this.m_mdata_srv_uri?this.m_mdata_srv_uri:"",this.m_cast_name?this.m_cast_name:"",this.m_cast_privtext?this.m_cast_privtext:"")}};
a._refresh_timeout_cb=function(){console.assert(this.m_refresh_xdomrpc==null);var b=this.m_webdetect_uri+"/neoip_casti_ctrl_wpage_jsrest.js";this.m_refresh_xdomrpc=new neoip.xdomrpc_t(b,neoip.xdomrpc_cb_t(this._xdomrpc_cb,this),"request_stream",this.m_mdata_srv_uri?this.m_mdata_srv_uri:"",this.m_cast_name?this.m_cast_name:"",this.m_cast_privtext?this.m_cast_privtext:"",this.m_scasti_uri?this.m_scasti_uri:"",this.m_scasti_mod?this.m_scasti_mod:"",this.m_http_peersrc_uri?this.m_http_peersrc_uri:"",
JSON.stringify(this.m_web2srv_obj))};
a._xdomrpc_cb=function(b,c,d,e){console.info("enter returned_val="+e);this.m_refresh_xdomrpc.destructor();this.m_refresh_xdomrpc=null;this.m_refresh_timeout=setTimeout(neoip.basic_cb_t(this._refresh_timeout_cb,this),this.m_refresh_delay*1E3);b=this.m_swarm_state;if(d)this.m_swarm_state="error due to "+d.string;else if(e==""){this.m_cast_privhash=e;this.m_swarm_state="starting"}else{this.m_cast_privhash=e;this.m_swarm_state="started"}if(this.m_swarm_state!=b){console.info("old_state="+b);console.info("new_state="+
this.m_swarm_state);if(this.m_callback){d={old_state:b,new_state:this.m_swarm_state};this.m_callback("changed_state",d)}}};neoip.casti_ctrl_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};neoip.playlist_t=function(b){b&&this.from_jspf(b)};a=neoip.playlist_t.prototype;
a.from_jspf=function(b){b=eval("("+b+")");b=b.playlist;this.m_base_date=Date.parse(b.date);this.m_identifier=b.identifier;this.m_meta={};this.m_extension={};this.m_meta.may_loop=true;this.m_meta.trackidx_beg=0;if(b.meta==undefined)b.meta=null;for(var c in b.meta)this.m_meta[c]=b.meta[c];if(b.extension==undefined)b.extension=null;for(c in b.extension)this.m_extension[c]=b.extension[c];this.m_track_arr=[];for(c=this.m_total_duration=0;c<b.track.length;c++){var d=new this.track_t(this,c+this.trackidx_beg(),
this.m_total_duration,b.track[c]);this.m_track_arr.push(d);this.m_total_duration+=this.m_track_arr[c].duration()}this.check()};a.current_track_pos=function(b){console.assert(b);b=b-this.m_base_date;b=b%this.m_total_duration;for(var c=0;c<this.m_track_arr.length;c++){if(this.m_track_arr[c].m_duration>b)break;b-=this.m_track_arr[c].m_duration}console.info("i="+c);console.info("trackidx_beg()="+this.trackidx_beg());console.assert(c<this.m_track_arr.length);return{trackidx:c+this.trackidx_beg(),track_reltime:b}};
a.current_track_pos_wseek=function(b){b=this.current_track_pos(b);var c=this.track_at(b.trackidx);if(c.may_not_startinmid())b.track_reltime=0;return b};a.check=function(){if(!typeof this.m_base_date=="number")throw"base_date is NOT Number";if(!(this.m_track_arr instanceof Array))throw"track_arr is NOT Array";for(var b=0;b<this.m_track_arr.length;b++){if(!(this.m_track_arr[b]instanceof this.track_t))throw"track "+b+" is not an playlist_t.track_t";this.m_track_arr[b].check()}};
a.is_valid=function(){try{this.check();return true}catch(b){return false}};a.same_instance_as=function(b){if(this.identifier()!=b.identifier())return false;if(this.instance_nonce()!=b.instance_nonce())return false;return true};a.set_outter_uri_arr=function(b){console.assert(b);this.m_outter_uri_arr=b};a.contain_trackidx=function(b){if(b<this.trackidx_beg())return false;if(b>=this.trackidx_end())return false;return true};
a.track_at=function(b){if(!this.contain_trackidx(b)){console.info("trackidx="+b);console.info("trackidx_beg="+this.trackidx_beg());console.info("trackidx_end="+this.trackidx_end());console.trace();console.assert(false)}console.assert(this.contain_trackidx(b));return this.m_track_arr[b-this.trackidx_beg()]};a.total_duration=function(){return this.m_total_duration};a.base_date=function(){return this.m_base_date};a.identifier=function(){return this.m_identifier};a.meta=function(){return this.m_meta};
a.extension=function(){return this.m_extension};a.may_loop=function(){return this.m_meta.may_loop};a.may_not_loop=function(){return!this.may_loop()};a.reload_delay=function(){return this.m_meta.reload_delay};a.instance_nonce=function(){return this.m_meta.instance_nonce};a.trackidx_beg=function(){return this.m_meta.trackidx_beg};a.trackidx_end=function(){return this.trackidx_beg()+this.m_track_arr.length};a.nb_track=function(){return this.m_track_arr.length};
a.track_t=function(b,c,d,e){console.assert(e);this.m_playlist=b;this.m_trackidx=c;this.m_base_reltime=d;e&&this._from_jspf(e)};a=neoip.playlist_t.prototype.track_t.prototype;
a._from_jspf=function(b){this.m_location=b.location;this.m_duration=b.duration;this.m_meta={};this.m_extension={};this.m_title="unspecified title";if(b.title)this.m_title=b.title;this.m_meta.start_time=0;this.m_meta.content_type="static";this.m_meta.prefetch_delay=Math.min(3E4,this.m_duration);if(b.meta==undefined)b.meta=null;for(var c in b.meta)this.m_meta[c]=b.meta[c];if(b.extension==undefined)b.extension=null;for(c in b.extension)this.m_extension[c]=b.extension[c]};
a.check=function(){if(!typeof this.m_location=="string")throw"m_location is NOT a string";if(!typeof this.m_duration=="number")throw"m_duration is NOT number";if(typeof this.m_meta.start_time!="number")throw"m_meta start_time is NOT number";if(typeof this.m_meta.content_type!="string")throw"m_meta content_type is NOT string";if(typeof this.m_meta.prefetch_delay!="number")throw"m_prefetch_delay is NOT number";this.is_stream()&&console.assert(this.m_meta.start_time==0);console.assert(this.prefetch_delay()<=
this.duration())};a.playlist=function(){return this.m_playlist};a.trackidx=function(){return this.m_trackidx};a.base_reltime=function(){return this.m_base_reltime};a.location=function(){return this.m_location};a.title=function(){return this.m_title};a.duration=function(){return this.m_duration};a.meta=function(){return this.m_meta};a.extension=function(){return this.m_extension};a.start_time=function(){return this.m_meta.start_time};a.content_type=function(){return this.m_meta.content_type};
a.video_aspect=function(){return this.m_meta.video_aspect};a.is_static=function(){return this.content_type()=="static"};a.is_stream=function(){return this.content_type()=="stream"};a.static_filelen=function(){if(this.m_extension.oload==null)return null;if(this.m_extension.oload.static_filelen==null)return null;return this.m_extension.oload.static_filelen};
a.may_startinmid=function(){var b=this.m_playlist.m_outter_uri_arr;if(this.is_stream())return true;console.assert(this.is_static());if((b=b.oload?false:true)&&!this.meta().location_rangereq_byuri_varname)return false;b=this.extension().flv_mdata_info;if(!b||b.kframe_index_present!=1)return false;return true};a.may_not_startinmid=function(){return!this.may_startinmid()};a.prefetch_delay=function(){return this.m_meta.prefetch_delay};a.prefetchable=function(){return this.prefetch_delay()>0};
a.prefetchable_at=function(b){console.assert(b>=0&&b<this.m_playlist.total_duration());var c=this.m_base_reltime-this.prefetch_delay(),d=this.m_base_reltime;if(c<0&&this.m_playlist.may_not_loop())c=0;if(c<0){c+=this.m_playlist.total_duration();if(b>=c)return true;if(b<=d)return true;return false}if(b<c)return false;if(b>d)return false;return true};
a.outter_uri=function(){var b=this.m_playlist.m_outter_uri_arr;if(this.is_static())return b.oload;if(this.is_stream())return b.casto;console.assert(0);return null};a.cooked_uri=function(b){var c=this.m_playlist.m_outter_uri_arr,d=null;if(this.is_static())d=c.oload?this._cooked_uri_static(c.oload,b):this.location();else if(this.is_stream())d=c.casto?this._cooked_uri_stream(c.casto,b):this.location();d+=d.indexOf("?")==-1?"?":"&";d+="uri_unifier_workaround="+Math.floor(Math.random()*999999);return d};
a._cooked_uri_static=function(b,c){console.assert(this.is_static());var d=new neoip.nested_uri_builder_t;d.outter_uri(b);d.inner_uri(this.location());b={};for(var e in this.extension().oload)b[e]=this.extension().oload[e];for(e in c)b[e]=c[e];d.set_var_arr(b);return d.to_string()};
a._cooked_uri_stream=function(b,c){console.assert(this.is_stream());b=b+"/"+this.extension().casto.cast_privhash+"/"+this.extension().casto.cast_name;var d={};for(var e in this.extension().casto)d[e]=this.extension().casto[e];for(e in c)d[e]=c[e];for(e in d)if(e!="cast_privhash")if(e!="cast_name"){b+=b.indexOf("?")==-1?"?":"&";b+=escape(e)+"="+escape(d[e])}console.info("cookie_uri="+b);return b};
a.flv_mdata_uri=function(b){var c,d=this.extension().flv_mdata_info;d||(d={type:"internal"});var e={};for(var g in b)e[g]=b[g];if(d.type=="external"){if(d.extmdata_len)e.static_filelen=d.extmdata_len;b=new neoip.nested_uri_builder_t;b.outter_uri(this.outter_uri());b.set_var_arr(e);b.inner_uri(d.extmdata_uri);c=b.to_string()}else if(d.type=="internal"){if(d.intmdata_len)e.read_ahead=d.intmdata_len;c=this.cooked_uri(e)}return c};
neoip.playlist_loader_t=function(b){console.assert(b.playlist_uid);console.assert(b.callback);console.assert(b.xdomrpc_url);this.m_playlist_uid=b.playlist_uid;this.m_callback=b.callback;this.m_xdomrpc_url=b.xdomrpc_url;this.m_xdomrpc=null;this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,this),0)};
neoip.playlist_loader_t.prototype.destructor=function(){if(this.m_reload_timeout){clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null}if(this.m_xdomrpc){this.m_xdomrpc.destructor();this.m_xdomrpc=null}};
neoip.playlist_loader_t.prototype._reload_timeout_cb=function(){console.info("load playlist "+this.m_playlist_uid);clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null;this.m_xdomrpc=new neoip.xdomrpc_t(this.m_xdomrpc_url,neoip.xdomrpc_cb_t(this._xdomrpc_cb,this),"castGetPlaylist",this.m_playlist_uid)};
neoip.playlist_loader_t.prototype._xdomrpc_cb=function(b,c,d,e){console.info("enter fault="+d+" returned_val="+e);this.m_xdomrpc.destructor();this.m_xdomrpc=null;if(d){b=1E4;console.info("unable to load playlist at "+this.m_playlist_uid+". will retry in "+b+"-msec");this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,this),b)}else{b=e;b=new neoip.playlist_t(b);if(b.reload_delay())this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,this),b.reload_delay());
this._notify_callback("new_playlist",{playlist:b})}};neoip.playlist_loader_t.prototype._notify_callback=function(b,c){this.m_callback!=null&&this.m_callback(b,c)};neoip.playlist_loader_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};neoip.plistarr_t=function(b){this.m_item_arr=[];b&&this._from_json(b)};a=neoip.plistarr_t.prototype;a._from_json=function(b){b=eval("("+b+")");for(var c=0;c<b.length;c++){var d=new this.item_t(b[c]);this.m_item_arr.push(d)}};
a.item_arr=function(){return this.m_item_arr};a.reload_delay=function(){return 2E4};a.raw_data=function(){for(var b=[],c=0;c<this.m_item_arr.length;c++){var d=this.m_item_arr[c];b.push(d.raw_data())}return b};a.has_playlist_uid=function(b){for(var c=0;c<this.item_arr().length;c++){var d=this.item_arr()[c];if(d.playlist_uid()==b)return true}return false};a.item_t=function(b){b&&this._from_json(b)};a=neoip.plistarr_t.prototype.item_t.prototype;a._from_json=function(b){this.m_json_data=b;this.check()};
a.check=function(){if(typeof this.m_json_data.playlist_title!="string")throw"playlist_title is NOT a string";if(typeof this.m_json_data.playlist_uid!="string")throw"playlist_uid is NOT a string";};a.playlist_title=function(){return this.m_json_data.playlist_title};a.playlist_uid=function(){return this.m_json_data.playlist_uid};a.external_dep=function(){return this.m_json_data.external_dep};a.raw_data=function(){return this.m_json_data};
a.is_playable=function(){if(this.external_dep()==null)return true;if(this._is_not_playable_suffix("oload"))return false;if(this._is_not_playable_suffix("casto"))return false;return true};a.is_not_playable=function(){return!this.is_playable()};a._is_playable_suffix=function(b){if(this.external_dep()==null)return true;if(this.external_dep()[b]==null)return true;if(this.external_dep()[b].required!=true)return true;if(neoip.apps_present(b))return true;return false};a._is_not_playable_suffix=function(b){return!this._is_playable_suffix(b)};
neoip.plistarr_loader_t=function(b){console.assert(b.plistarr_uid);console.assert(b.callback);console.assert(b.xdomrpc_url);this.m_plistarr_uid=b.plistarr_uid;this.m_callback=b.callback;this.m_xdomrpc_url=b.xdomrpc_url;this.m_xdomrpc=null;this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,this),0)};
neoip.plistarr_loader_t.prototype.destructor=function(){if(this.m_reload_timeout){clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null}if(this.m_xdomrpc){this.m_xdomrpc.destructor();this.m_xdomrpc=null}};neoip.plistarr_loader_t.prototype._reload_timeout_cb=function(){if(this.m_reload_timeout){clearTimeout(this.m_reload_timeout);this.m_reload_timeout=null}this.m_xdomrpc=new neoip.xdomrpc_t(this.m_xdomrpc_url,neoip.xdomrpc_cb_t(this._xdomrpc_cb,this),"castGetPlistarr",this.m_plistarr_uid)};
neoip.plistarr_loader_t.prototype._xdomrpc_cb=function(b,c,d,e){console.info("enter fault="+d+" returned_val="+e);console.info("slotaa");console.dir(JSON.parse(e));console.info("slotaaOO");this.m_xdomrpc.destructor();this.m_xdomrpc=null;if(d){b=1E4;console.info("unable to load plistarr. will retry in "+b+"-sec");this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,this),b)}else{b=e;b=new neoip.plistarr_t(b);if(b.reload_delay())this.m_reload_timeout=setTimeout(neoip.basic_cb_t(this._reload_timeout_cb,
this),b.reload_delay());this._notify_callback("new_plistarr",{plistarr:b})}};neoip.plistarr_loader_t.prototype._notify_callback=function(b,c){this.m_callback!=null&&this.m_callback(b,c)};neoip.plistarr_loader_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};neoip.subplayer_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};
neoip.subplayer_vlc_t=function(b,c){this.m_plugin_id=b;this.m_clisrv_diffdate=c;this.m_plugin_abstime=this.m_current_state=this.m_start_time=this.m_trackidx=this.m_callback=null;this.m_event_period=1E3;this.m_event_timeout=null};a=neoip.subplayer_vlc_t.prototype;a.destructor=function(){};a._server_date=function(){var b=new Date;b.setTime(b.getTime()-this.m_clisrv_diffdate);return b};a.callback=function(b){this.m_callback=b};a.current_state=function(){return this.m_current_state};
a.current_track_pos=function(){var b={trackidx:this.m_trackidx,track_reltime:this.track_reltime()};if(b.track_reltime==null)return null;return b};a.track_reltime=function(){if(this.m_reltime_begdate)return this._server_date()-this.m_reltime_begdate;if(this.m_plugin_abstime==null)return null;if(this.m_current_state!="playing")return null;return this.m_plugin_abstime-this.m_start_time};a.trackidx=function(){return this.m_trackidx};a.start_time=function(){return this.m_start_time};a.current_state=function(){return this.m_current_state};
a.build_objembed=function(b,c,d){var e="";e+='<object type="application/x-vlc-plugin"';e+=' pluginspage="http://www.videolan.org/"';e+=' version="VideoLAN.VLCPlugin.2"';e+=' width="'+c+'"';e+=' height="'+d+'"';e+=' id="'+this.m_plugin_id+'"';e+=">";e+="</object>";document.getElementById(b).innerHTML=e};
a.play=function(b,c){var d=c.playlist().track_at(b.trackidx);c=d.cooked_uri();this.stop();this.m_trackidx=b.trackidx;this.m_start_time=d.start_time();this.m_reltime_begdate=d.is_stream()?this._server_date():null;d=[];d.push(":start-time="+(this.m_start_time+b.track_reltime));d.push(":http-caching=50");b=document.getElementById(this.m_plugin_id);b.playlist.add(c,null,d);b.playlist.play();this.m_event_timeout=setTimeout(neoip.basic_cb_t(this._event_timeout_cb,this),this.m_event_period)};
a.stop=function(){var b=document.getElementById(this.m_plugin_id);this.m_reltime_begdate=this.m_plugin_abstime=this.m_current_state=this.m_start_time=this.m_trackidx=null;if(this.m_event_timeout){clearTimeout(this.m_event_timeout);this.m_event_timeout=null}try{b.playlist.isPlaying&&b.playlist.stop();b.playlist.tracks.count>0&&b.playlist.clear()}catch(c){console.log("exception="+c)}};
a.event_timeout_cb=function(){var b=document.getElementById(this.m_plugin_id),c=this.m_current_state,d;d=b.input.state==1?"connecting":b.input.state==2?"buffering":b.input.state==3?"playing":"unknown";if(d!=this.m_current_state){this.m_current_state=d;if(this.m_callback){c={old_state:c,new_state:d};this.m_callback("changed_state",c)}}if(b.playlist.isPlaying){try{var e=b.input.time}catch(g){console.info("exception="+g);return}if(e<this.m_start_time)e=this.m_start_time;this.m_plugin_abstime=e;if(this.m_callback){c=
{new_time:this.track_reltime()};this.m_callback("new_time",c)}this.m_event_timeout=setTimeout(neoip.basic_cb_t(this._event_timeout_cb,this),this.m_event_period)}};neoip.subplayer_asplayer_t=function(b,c){this.m_plugin_htmlid=b;this.m_clisrv_diffdate=c;this.m_plugin_abstime=this.m_current_state=this.m_start_time=this.m_trackidx=this.m_callback=null;neoip_subplayer_asplayer_cb_doreg(this)};a=neoip.subplayer_asplayer_t.prototype;a.destructor=function(){neoip_subplayer_asplayer_cb_unreg(this)};
a.callback=function(b){this.m_callback=b};a.current_state=function(){return this.m_current_state};a.current_track_pos=function(){var b={trackidx:this.m_trackidx,track_reltime:this.track_reltime()};if(b.track_reltime==null)return null;return b};a.track_reltime=function(){if(this.m_reltime_begdate)return this._server_date().getTime()-this.m_reltime_begdate;if(this.m_plugin_abstime==null)return null;return this.m_plugin_abstime-this.m_start_time};a.trackidx=function(){return this.m_trackidx};
a.start_time=function(){return this.m_start_time};
a.build_objembed=function(b,c,d){c=new SWFObject(neoip.globalCfg.subplayer_asplayer_swf_url,this.m_plugin_htmlid,c.toString(),d.toString(),"9","#000000",true);c.addParam("allowScriptAccess","always");d=true;c.addParam("allowfullscreen",d?"true":"false");c.addVariable("allowfullscreen",d?"true":"false");c.addVariable("jscallback_str","neoip_subplayer_asplayer_plugin_cb");c.addVariable("jscallback_key",neoip_subplayer_asplayer_cb_build_key(this));c=c.write(b);if(!c){c="<table width='100%' height='100%' align='center'><tr><td valign='middle' align='center'><span style='color:red; font-size: larger;'>Flash required</span><br/><a href='http://get.adobe.com/flashplayer/' target='_blank'>Download it</a></td></tr></table>";
document.getElementById(b).innerHTML=c}};
a.play=function(b,c){var d=c.playlist().track_at(b.trackidx),e={},g={};this.m_trackidx=b.trackidx;this.m_start_time=d.start_time();var i=null;if(d.is_stream()){i=null;this.m_reltime_begdate=this._server_date().getTime()-b.track_reltime}else if(d.is_static()){i=this.m_start_time+b.track_reltime;this.m_reltime_begdate=null}else console.assert(false);if(d.is_static()&&c.has_oload()){g.httpo_maxrate="1k";if(d.static_filelen()!=null&&d.start_time()==0){var k=5E3,m=d.static_filelen(),q=d.duration();k=k*
(m/q);g.httpo_maxrate_thres=Math.round(k)}else g.httpo_maxrate_thres="500k";g.httpo_full_id=neoip.core.build_nonce_str(16);k=c.m_outter_uri_arr.oload+"/neoip_oload_httpo_ctrl_xmlrpc.cgi";k=neoip.core.doscramble_uri(k);e.net_ratelim={key:g.httpo_full_id,uri:k}}g=d.cooked_uri(g);e.content_url=g;if(d.video_aspect())e.video_aspect=d.video_aspect();console.info("====================================");console.info("track_uri="+g+"seek_time="+i);console.dir(b);console.info("====================================");
if(i>0){console.assert(d.may_startinmid());console.assert(d.is_static());e.start_time=i/1E3;e.rangereq_type="flv";if(c.has_oload()){b=d.extension().flv_mdata_info;e.rangereq_flv_var="pos";e.flv_mdata_uri=d.flv_mdata_uri();e.flv_mdata_type=b?b.type:"internal"}else{d=d.meta().location_rangereq_byuri_varname;console.assert(d);e.rangereq_flv_var=d}}console.info("startplaying with: ");console.dir(e);d=document.getElementById(this.m_plugin_htmlid);console.assert(d.track_count()==0);d.track_add(e,0);d.playlist_loop(false);
d.set_smoothing(true);d.playing_start()};a.stop=function(){var b=document.getElementById(this.m_plugin_htmlid);b.playing_stop();b.track_del(0);this.m_reltime_begdate=this.m_plugin_abstime=this.m_current_state=this.m_start_time=this.m_trackidx=null};a._server_date=function(){var b=new Date;b.setTime(b.getTime()-this.m_clisrv_diffdate);return b};
a.plugin_cb=function(b,c){if(b=="state_change"){b=this.m_current_state;c=c.new_state;if(c!=this.m_current_state){this.m_current_state=c;c={old_state:b,new_state:c};this.notify_callback("changed_state",c)}}else if(b=="current_time"){this.m_plugin_abstime=c.time*1E3;c={new_time:this.track_reltime()};this.notify_callback("new_time",c)}else this.notify_callback(b,c)};a.flv_kframe_find=function(b,c,d,e){var g=document.getElementById(this.m_plugin_htmlid);g.flv_kframe_find(b/1E3,c,d,e)};
a.notify_callback=function(b,c){this.m_callback!=null&&this.m_callback(b,c)};var neoip_subplayer_asplayer_cb_arr=[];function neoip_subplayer_asplayer_cb_build_key(b){return"tag_"+b.m_plugin_htmlid}function neoip_subplayer_asplayer_cb_doreg(b){var c=neoip_subplayer_asplayer_cb_build_key(b);console.assert(!neoip_subplayer_asplayer_cb_arr[c]);neoip_subplayer_asplayer_cb_arr[c]=b}
function neoip_subplayer_asplayer_cb_unreg(b){b=neoip_subplayer_asplayer_cb_build_key(b);console.assert(neoip_subplayer_asplayer_cb_arr[b]);delete neoip_subplayer_asplayer_cb_arr[b]}function neoip_subplayer_asplayer_plugin_cb(b,c,d){b=neoip_subplayer_asplayer_cb_arr[b];console.assert(b);b.plugin_cb(c,d)}
neoip.player_t=function(b,c,d){this.m_subplayer=b;this.m_clisrv_diffdate=c;this.m_callback=d;this.m_subplayer.callback(neoip.subplayer_cb_t(this.subplayer_cb,this));this.m_playlist=null;this.m_outter_uri_arr=[];this.m_prefetcher_arr=[];this.m_curtrack_timeout=null;this.m_is_playing=false;this.m_prefetch_timeout=null;this.m_resync_period=1;this.m_resync_threshold=3E4;this.m_resync_timeout=null};a=neoip.player_t.prototype;a.destructor=function(){this.is_playing()&&this.playing_stop()};
a._server_date=function(){var b=new Date;b.setTime(b.getTime()-this.m_clisrv_diffdate);return b};a._curtrack_start=function(b){var c=this.m_playlist.track_at([b.trackidx]);console.dir(b);this.m_subplayer.play(b,this);b=c.duration()-b.track_reltime;console.assert(b>=0);console.info("delay_remain="+b);this.m_curtrack_timeout=setTimeout(neoip.basic_cb_t(this._curtrack_timeout_cb,this),b)};
a._curtrack_stop=function(){console.info("enter trackidx="+this.m_subplayer.trackidx());console.assert(this.m_curtrack_timeout);clearTimeout(this.m_curtrack_timeout);this.m_curtrack_timeout=null;this._prefetch_try_stop(this.m_subplayer.trackidx());this.m_subplayer.stop()};
a._curtrack_timeout_cb=function(){var b=this.m_subplayer.trackidx()+1;console.assert(this.is_playing());this._curtrack_stop();if(b>=this.m_playlist.trackidx_end()){if(this.m_playlist.may_loop()==false){console.info("next_trackidx="+b);console.info("trackidx_end="+this.m_playlist.trackidx_end());console.info("trackidx_beg="+this.m_playlist.trackidx_beg());console.assert(0);return}console.assert(b==this.m_playlist.trackidx_end());b=this.m_playlist.trackidx_beg()}console.info("next_trackidx="+b);b={trackidx:b,
track_reltime:0};this._curtrack_start(b)};a._prefetch_initial=function(){var b=this.m_playlist.current_track_pos(this._server_date());console.assert(!this.is_playing());this._prefetch_try_start(b)};
a._prefetch_reinit_full=function(){var b=this.m_playlist.current_track_pos(this._server_date());console.info("ENTER prefetch_reinit_full: curtrack_pos.trackidx="+b.trackidx+" track_reltime="+b.track_reltime);if(this.m_prefetch_timeout){clearTimeout(this.m_prefetch_timeout);this.m_prefetch_timeout=null}var c=this.m_playlist.track_at(b.trackidx);b=c.base_reltime()+b.track_reltime;c=Number.MAX_VALUE;for(var d=this.m_playlist.trackidx_beg();d!=this.m_playlist.trackidx_end();d++){var e=this.m_playlist.track_at(d);
if(e.prefetchable())if(e.prefetchable_at(b))this._prefetch_try_start({trackidx:e.trackidx(),track_reltime:0});else{e=e.base_reltime()-e.prefetch_delay();if(e<b){if(this.m_playlist.may_not_loop())continue;e+=this.m_playlist.total_duration()}c=Math.min(c,e-b);console.assert(c>=0)}}if(c!=Number.MAX_VALUE){console.info("start prefetch_timeout to expire in "+c);console.assert(c>0);this.m_prefetch_timeout=setTimeout(neoip.basic_cb_t(this._prefetch_reinit_full,this),c)}console.info("LEAVE prefetch_reinit_full")};
a._prefetch_try_start=function(b){var c=b.trackidx;if(!this.m_prefetcher_arr[c]){b=new neoip.prefetcher_t(b,this);this.m_prefetcher_arr[c]=b}};a._prefetch_try_stop=function(b){if(this.m_prefetcher_arr[b]){var c=this.m_prefetcher_arr[b];this.m_prefetcher_arr.splice(b,1);c.destructor()}};
a._resync_if_needed=function(){this.m_resync_timeout=setTimeout(neoip.basic_cb_t(this._resync_if_needed,this),this.m_resync_period);var b=this.m_playlist.current_track_pos(this._server_date()),c=this.m_subplayer.current_track_pos();if(c!=null){var d=this.m_playlist.track_at(b.trackidx),e=this.m_playlist.track_at(c.trackidx);d=d.base_reltime()+b.track_reltime;e=e.base_reltime()+c.track_reltime;e=Math.abs(d-e);if(!(e<this.m_resync_threshold)){console.error("NEEDS RESYNC! delta_sync="+(e/1E3).toFixed(2)+
"-sec");console.info("playlist track pos: trackidx="+b.trackidx+" track_reltime="+b.track_reltime);console.info("subplayer track pos: trackidx="+c.trackidx+" track_reltime="+c.track_reltime)}}};
a.subplayer_cb=function(b,c,d,e){d=="changed_state"&&e.new_state=="playing"&&this._prefetch_try_stop(this.m_subplayer.trackidx());d=="changed_state"&&e.new_state=="playing"&&this._prefetch_reinit_full();if(d=="flv_kframe_find_cb"){b=e.userptr;(b=this.m_prefetcher_arr[b])&&b.flv_kframe_find_cb(e)}this.m_callback&&this.m_callback(d,e)};
a.playlist=function(b){if(!b)return this.m_playlist;var c=this.m_playlist,d=false;if(c&&c.same_instance_as(b)==false)d=true;if(b.contain_trackidx(this.m_subplayer.trackidx())==false)d=true;if(this.is_not_playing())d=false;d&&this.playing_stop();this.m_playlist=b;this.m_playlist.set_outter_uri_arr(this.m_outter_uri_arr);d&&this.playing_start();return this.m_playlist};a.practical_trackidx=function(){return this.m_subplayer.trackidx()};a.practical_reltime=function(){return this.m_subplayer.track_reltime()};
a.practical_state=function(){return this.m_subplayer.current_state()};a.set_outter_uri=function(b,c){this.m_outter_uri_arr[b]=c;this.m_playlist&&this.m_playlist.set_outter_uri_arr(this.m_outter_uri_arr)};a.has_oload=function(){return this.m_outter_uri_arr.oload!=null};a.has_casto=function(){return this.m_outter_uri_arr.casto!=null};a.is_playing=function(){return this.m_is_playing};a.is_not_playing=function(){return!this.is_playing()};
a.playing_start=function(){console.assert(this.m_playlist);if(!this.is_playing()){this.m_is_playing=true;var b=this.m_playlist.current_track_pos_wseek(this._server_date());this._curtrack_start(b)}};a.playing_stop=function(){for(trackidx in this.m_prefetcher_arr)this._prefetch_try_stop(trackidx);if(this.is_playing()){this.m_is_playing=false;this._curtrack_stop();if(this.m_prefetch_timeout){clearTimeout(this.m_prefetch_timeout);this.m_prefetch_timeout=null}}};
neoip.player_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};neoip.player_wikidbg_t=function(){};neoip.player_wikidbg=new neoip.player_wikidbg_t;
neoip.player_wikidbg_t.prototype.main_cb=function(b,c,d){if(typeof d=="string")d=document.getElementById(d);neoip.wikidbg_subelem_delete(d);d=new neoip.wikidbg_elem_t(d);if(c=="page")return this._page_cb(b,c,d);else if(c=="prefetch")return this._prefetch_cb(b,c,d);else if(c=="admin")return this._admin_cb(b,c,d);else throw"unknown keyword "+c;};neoip.player_wikidbg_t.prototype._page_cb=function(b,c,d){b=d.table().tbody();b.clone().tr().td().bold("Title").up(2).td().text(": wow super title");b.clone().tr().td().bold("State").up(2).td().text(": wow super state")};
neoip.player_wikidbg_t.prototype._prefetch_cb=function(b,c,d){c=d.ol();for(var e in b.m_prefetcher_arr){d=b.m_prefetcher_arr[e];var g=c.clone().li().table().tbody();g.clone().tr().td().bold("track idx").up(2).td().text(": "+e);g.clone().tr().td().bold("track pos").up(2).td().text(": idx:"+d.m_track_pos.trackidx).up(1).text("  reltime:"+d.m_track_pos.track_reltime);g.clone().tr().td().bold("mdata_uri").up(2).td().text(": "+d.m_mdata_uri);g.clone().tr().td().bold("track_uri").up(2).td().text(": "+d.m_track_uri)}};
neoip.player_wikidbg_t.prototype._admin_cb=function(b,c,d){var e=b.practical_trackidx(),g=b.practical_reltime();c=b.practical_state();var i=b.playlist().track_at(e);b="undefined";if(i.title())b=i.title();e="";if(g){e+=(g/1E3).toFixed(2)+"-sec";e+=" - ";e+=(100*g/i.duration()).toFixed(0)+"%";e+=" of total "}else e+="position unknown but total ";e+=(i.duration()/1E3).toFixed(2)+"-sec";d=d.table().tbody();d.clone().tr().td().bold("Title").up(2).td().text(": "+b);d.clone().tr().td().bold("State").up(2).td().text(": "+
c);d.clone().tr().td().bold("Position").up(2).td().text(": "+e)};
neoip.recorder_t=function(b,c,d,e){this.m_callback=b;this.m_objembed_htmlid=c;this.m_flash_param=d;this.m_casti_param=e;b=neoip.casti_ctrl_cb_t(this._casti_ctrl_cb,this);this.m_casti_ctrl=new neoip.casti_ctrl_t(b);b=this.m_casti_ctrl.web2srv_obj();if(neoip.globalCfg.playerLocation)b.playerLocation=neoip.globalCfg.playerLocation;if(typeof b.cookie=="undefined")b.cookie={};if(c=neoip.core.cookie_read("urfastr_rememberkey"))b.cookie.urfastr_rememberkey=c};a=neoip.recorder_t.prototype;
a.destructor=function(){if(this.m_geolocalizer){this.m_geolocalizer.destructor();this.m_geolocalizer=null}if(this.m_casti_ctrl){this.m_casti_ctrl.destructor();this.m_casti_ctrl=null}};a.casti_param=function(){return this.m_casti_param};a.flash_param=function(){return this.m_flash_param};
a.record_start=function(){var b=document.getElementById(this.m_objembed_htmlid),c={video_w:this.m_flash_param.video_w,video_h:this.m_flash_param.video_h,video_fps:this.m_flash_param.video_fps,video_bw:this.m_flash_param.video_bw,audio_bw:this.m_flash_param.audio_bw,audio_mute:this.m_flash_param.audio_mute,rtmp_uri:this._get_scasti_uri()};console.assert(!b.record_inprogress());console.info("pre  record_start");console.dir(c);try{b.record_start(c)}catch(d){b=/.*\".*: (.*)\".*/.exec(d);return b=b[1]}console.info("post record_start");
this.m_casti_ctrl.webdetect_uri(neoip.outter_uri("casti"));this.m_casti_ctrl.cast_name(this.m_casti_param.cast_name);this.m_casti_ctrl.cast_privtext(this.m_casti_param.cast_privtext);this.m_casti_ctrl.mdata_srv_uri(this.m_casti_param.mdata_srv_uri);this.m_casti_ctrl.scasti_uri(this._get_scasti_uri());this.m_casti_ctrl.scasti_mod(this.m_casti_param.scasti_mod);this.m_casti_ctrl.http_peersrc_uri(this.m_casti_param.http_peersrc_uri);this.m_casti_ctrl.start_recording();return false};
a.record_stop=function(){var b=document.getElementById(this.m_objembed_htmlid);b.record_inprogress()&&b.record_stop();this.m_casti_ctrl.is_recording()&&this.m_casti_ctrl.stop_recording()};a.record_inprogress=function(){return this.m_casti_ctrl.is_recording()};
a._get_scasti_uri=function(){var b=neoip.outter_uri("casti");b=b.match(/http:\/\/(.+?)([:\/]|$)/);console.assert(b);b=b[1];return b="rtmp://"+b+":1935/"+escape(this.m_casti_param.mdata_srv_uri)+"/"+escape(this.m_casti_param.cast_privtext)+"/"+escape(this.m_casti_param.cast_name)};
a._casti_ctrl_cb=function(b,c,d,e){console.info("enter");if(d=="changed_state"&&(e.old_state=="starting"||e.old_state=="started")&&!(e.new_state=="starting"||e.new_state=="started")){b=document.getElementById(this.m_objembed_htmlid);b.record_unpublishing()}if(d=="changed_state"&&e.new_state=="starting"){b=document.getElementById(this.m_objembed_htmlid);b.record_dopublishing();console.assert(b.record_inprogress())}d=="changed_state"&&this.m_callback&&this.m_callback("changed_state",{old_state:e.old_state,
new_state:e.new_state})};a._notify_callback=function(b,c){this.m_callback!=null&&this.m_callback(b,c)};neoip.recorder_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};
neoip.prefetcher_t=function(b,c){this.m_track_pos=b;this.m_player=c;console.info("m_track_pos trackidx="+b.trackidx+" track_reltime="+b.track_reltime);var d=c.m_playlist.track_at(b.trackidx);if(!(d.is_static()&&!c.has_oload()))if(!(d.is_stream()&&!c.has_casto())){var e=d.extension().flv_mdata_info;e||(e={type:"internal"});var g;if(d.is_static())g=c.m_outter_uri_arr.oload;if(d.is_stream())g=c.m_outter_uri_arr.casto;this.m_rpc_uri=g+"/neoip_uri_prefetch_jsrest.js";g=d.start_time()+b.track_reltime;this.m_mdata_uri=
d.flv_mdata_uri({httpo_maxrate:"0k"});console.info("mdata_uri="+this.m_mdata_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_mdata_uri);var i=c.m_subplayer.flv_kframe_find!=null;if(i&&g>0)c.m_subplayer.flv_kframe_find(g,e.type,d.flv_mdata_uri(),b.trackidx);else{this.m_track_uri=this._cpu_track_uri();console.info("track_uri="+this.m_track_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_track_uri)}}};
neoip.prefetcher_t.prototype.destructor=function(){this.m_track_uri&&new neoip.xdomrpc_t(this.m_rpc_uri,null,"delete_prefetch",this.m_track_uri);this.m_mdata_uri&&new neoip.xdomrpc_t(this.m_rpc_uri,null,"delete_prefetch",this.m_mdata_uri)};neoip.prefetcher_t.prototype._cpu_track_uri=function(b){var c=this.m_player.m_playlist.track_at(this.m_track_pos.trackidx),d={httpo_maxrate:"0k"};for(var e in b)d[e]=b[e];return c.cooked_uri(d)};
neoip.prefetcher_t.prototype.flv_kframe_find_cb=function(b){console.info("enter");console.dir(b);console.assert(!this.m_track_uri);this.m_track_uri=b.event_type=="succeed"?this._cpu_track_uri({subfile_byteoffset:b.result.byte_offset}):this._cpu_track_uri();console.info("this.m_track_uri="+this.m_track_uri);new neoip.xdomrpc_t(this.m_rpc_uri,null,"create_prefetch",this.m_track_uri)};
neoip.ezplayer_t=function(b,c){this.m_cfgvar_arr=b;this.m_callback=c;this.m_subplayer_html_id="subplayer_plugin_html_id";this.m_subplayer_type="asplayer";this.m_fullpage_state="normal";this.m_autobuffer=this.m_play_post_playlist=false;this.m_clisrv_diffdate=0;this.m_playlist_uid="plistarr_play/sample_static.playlist.jspf";neoip.core.dom_event_listener(window,"unload",function(){});this.cfgvar_has("fullpage_state")&&this.fullpage_state(this.cfgvar_get("fullpage_state"));this.cfgvar_has("onload_start_play")&&
this.cfgvar_get("onload_start_play")=="enabled"&&this.play_post_playlist(true)};a=neoip.ezplayer_t.prototype;
a.destructor=function(){if(this.m_objembed_initmon){this.m_objembed_initmon.destructor();this.m_objembed_initmon=null}if(this.m_webpack_detect){this.m_webpack_detect.destructor();this.m_webpack_detect=null}if(this.m_player){this.m_player.destructor();this.m_player=null}if(this.m_subplayer){this.m_subplayer.destructor();this.m_subplayer=null}if(this.m_embedui){this.m_embedui.destructor();this.m_embedui=null}this._playlist_loader_dtor();this._plistarr_loader_dtor()};
a.play_post_playlist=function(b){console.assert(b==true||b==false);this.m_play_post_playlist=b;console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false)};a.autobuffer=function(b){console.assert(b==true||b==false);this.m_autobuffer=b;console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false)};a.fullpage_state=function(b){console.assert(b=="normal"||b=="maximized");this.m_fullpage_state=b};
a.load_plistarr=function(b){console.info("enter uri="+b);this._plistarr_loader_dtor();this._plistarr_loader_ctor(b)};a.set_server_date=function(b){var c=new Date;this.m_clisrv_diffdate=c.getTime()-b};a.start=function(){var b=neoip.basic_cb_t(this._window_onload_cb,this);neoip.core.dom_event_listener(window,"load",b)};
a._window_onload_cb=function(){if(this.m_subplayer_type=="vlc"){var b="playlist.isPlaying";this.m_subplayer=new neoip.subplayer_vlc_t(this.m_subplayer_html_id,this.m_clisrv_diffdate)}else if(this.m_subplayer_type=="asplayer"){b=["embedui_exist","embedui_create","embedui_delete","embedui_update","current_time","current_state","playing_start","playing_stop","set_sound_vol","get_sound_vol","set_sound_pan","get_sound_pan","set_sound_mute","get_sound_mute","flv_kframe_find","playlist_loop","set_smoothing",
"get_smoothing","set_deblocking","get_deblocking","set_fullscreen","get_fullscreen","may_fullscreen","track_add","track_del","track_get","track_count"];this.m_subplayer=new neoip.subplayer_asplayer_t(this.m_subplayer_html_id,this.m_clisrv_diffdate)}else console.assert(false);if(this.m_fullpage_state=="normal")var c="320",d="240";else if(this.m_fullpage_state=="maximized")d=c="100%";else console.assert(false);this.m_subplayer.build_objembed("neoip_player_container_id",c,d);this.m_objembed_initmon=
new neoip.objembed_initmon_t;this.m_objembed_initmon.start(this.m_subplayer_html_id,b,neoip.objembed_initmon_cb_t(this._objembed_initmon_cb,this));this._webpack_detect_start()};
a._objembed_initmon_cb=function(){console.info("enter objembed notified");this.m_objembed_initmon.destructor();this.m_objembed_initmon=null;this.m_player=new neoip.player_t(this.m_subplayer,this.m_clisrv_diffdate,neoip.player_cb_t(this._neoip_player_cb,this));this._playlist_loader_ctor();this._player_post_init();var b=document.getElementById(this.m_subplayer_html_id);b=document.getElementById(this.m_subplayer_html_id);if(typeof b.embedui_create=="function")this.m_embedui=new neoip.ezplayer_embedui_t(this)};
a._player_post_init=function(){if(this.m_player){for(var b in{oload:null,casto:null}){var c=null;if(neoip.apps_present(b))c=neoip.outter_uri(b);this.m_player.set_outter_uri(b,c)}console.assert(this.m_autobuffer==false||this.m_play_post_playlist==false);this.m_autobuffer&&this.m_player._prefetch_initial();if(!this.webpack_detect_running()){this.m_callback&&this.m_callback("player_initialized");if(this.m_player.playlist()!=null)if(this.m_play_post_playlist!=false){this.m_play_post_playlist=false;neoip.core.cookie_write("ezplayer_playlist_uid",
this.m_playlist_uid,30);this.playing_start()}}}};a.plistarr_get=function(){return this.m_plistarr};a._plistarr_loader_ctor=function(b){console.info("ENTER plistarr_loader_ctor");this._plistarr_loader_dtor();this.m_plistarr_loader=new neoip.plistarr_loader_t({callback:neoip.plistarr_loader_cb_t(this._neoip_plistarr_loader_cb,this),xdomrpc_url:neoip.globalCfg.plistarr_loader_xdomrpc_url,plistarr_uid:b})};
a._plistarr_loader_dtor=function(){if(this._plistarr_loader_running()!=false){console.info("ENTER plistarr_loader_dtor");this.m_plistarr_loader.destructor();this.m_plistarr_loader=null}};a._plistarr_loader_running=function(){if(!this.m_plistarr_loader)return false;return true};
a._neoip_plistarr_loader_cb=function(b,c,d,e){console.assert(d=="new_plistarr");console.info("enter event_type="+d);console.dir(e);this.m_plistarr=e.plistarr;if(!(this.m_player&&this.m_player.is_playing())){if((b=neoip.core.cookie_read("ezplayer_playlist_uid"))&&!this.m_plistarr.has_playlist_uid(b))b=null;b?this.change_playlist(b):this.change_playlist(this.m_plistarr.item_arr()[0].playlist_uid())}};
a._playlist_loader_ctor=function(){console.info("ENTER playlist_loader_ctor");this._playlist_loader_dtor();this.m_playlist_loader=new neoip.playlist_loader_t({callback:neoip.playlist_loader_cb_t(this._neoip_playlist_loader_cb,this),xdomrpc_url:neoip.globalCfg.playlist_loader_xdomrpc_url,playlist_uid:this.m_playlist_uid})};
a._playlist_loader_dtor=function(){if(this._playlist_loader_running()!=false){console.info("ENTER playlist_loader_dtor");this.m_playlist_loader.destructor();this.m_playlist_loader=null}};a._playlist_loader_running=function(){if(!this.m_playlist_loader)return false;return true};
a._neoip_playlist_loader_cb=function(b,c,d,e){console.info("enter event_type="+d);if(this.m_player){console.assert(e.playlist);this.m_player.playlist(e.playlist);this.m_play_post_playlist&&this.playing_start();this.m_embedui&&this.m_embedui.playlist_loader_cb(d,e);this.m_player.is_not_playing()&&this._playlist_loader_dtor()}};
a._neoip_player_cb=function(b,c,d,e){if(d=="asmenu_item_select"){b="http://urfastr.net/video";window.top.location.href=b}else if(d=="changed_state"||d=="new_time")this.m_embedui&&this.m_embedui.neoip_player_cb(d,e);else if(d=="error"){this.m_player.is_playing()&&this.playing_stop();this.m_embedui&&this.m_embedui.neoip_player_cb(d,e)}else d=="embedui_event"&&this.m_embedui.embedui_event_cb(e.event_type,e.arg)};
a._webpack_detect_start=function(){var b=neoip.webpack_detect_cb_t(this._webpack_detect_cb,this);this.m_webpack_detect=new neoip.webpack_detect_t(b,neoip.globalCfg.webpack_detect_apps_params)};a._webpack_detect_cb=function(b,c,d){this.m_webpack_detect.destructor();this.m_webpack_detect=null;this.m_webpack_detect_result=d;console.info("webpack_state="+d);console.assert(!this.webpack_detect_running());this.m_embedui&&this.m_embedui.webpack_detect_completed_cb();this._player_post_init()};
a.webpack_detect_running=function(){if(this.m_webpack_detect)return true;return false};a.webpack_detect_result=function(){if(!this.m_webpack_detect_result)return"inprobing";return this.m_webpack_detect_result};a.cfgvar_arr=function(){return this.m_cfgvar_arr};a.cfgvar_has=function(b){return this.m_cfgvar_arr[b]!=undefined};a.cfgvar_get=function(b){return this.m_cfgvar_arr[b]};a.cfgvar_set=function(b,c){this.m_cfgvar_arr[b]=c};
a.change_playlist=function(b){this._playlist_loader_dtor();this.m_playlist_uid=b;typeof pageTracker!="undefined"&&pageTracker._trackPageview("/"+this.m_playlist_uid);this.m_player&&this._playlist_loader_ctor()};a.playing_start=function(){this.m_player.playing_start();this._playlist_loader_running()||this._playlist_loader_ctor();this.m_embedui&&this.m_embedui.playing_start();this.m_callback&&this.m_callback("play_starting",{playlist_uid:this.m_playlist_uid})};
a.playing_stop=function(){this.m_player.playing_stop();this._playlist_loader_running()&&this.m_player.playlist()&&this._playlist_loader_dtor();this.m_embedui&&this.m_embedui.playing_stop();this.m_callback&&this.m_callback("play_stopping",{playlist_uid:this.m_playlist_uid})};a.is_playing=function(){return this.m_player.is_playing()};neoip.ezplayer_cb_t=function(b,c,d){var e=c||window;return function(g,i){b.call(e,this,d,g,i)}};
neoip.ezplayer_embedui_t=function(b){this.m_ezplayer=b;b=this._get_plugin();var c={embedui_class:"root_stage",embedui_id:"embedui_id_root_stage",userptr:{embedui_id:"embedui_id_root_stage"},element_opt:{}};b.embedui_create(c);this._sound_init_from_cookie();c={embedui_class:"button_volume",embedui_id:"embedui_id_volume",userptr:{embedui_id:"embedui_id_volume"},element_opt:{sound_vol:b.get_sound_vol(),sound_mute:b.get_sound_mute()},base_sprite:{element_x:0,element_y:0,element_w:0.1,element_h:0,anchor_x:0.5,
anchor_y:0.5,display_type:"timeout",timeout_delay:999E3}};b.embedui_create(c);c={embedui_class:"button_bitmap",embedui_id:"embedui_id_winsizer",userptr:{embedui_id:"embedui_id_winsizer"},element_opt:{type:"vector",location:b.get_fullscreen()?"win_normalizer":"win_maximizer"},base_sprite:{element_x:1,element_y:0,element_w:0.08,element_h:0,anchor_x:0,anchor_y:0,display_type:"timeout",timeout_delay:999E3}};b.embedui_create(c);c={embedui_class:"button_bitmap",embedui_id:"embedui_id_playlist_toggle",userptr:{embedui_id:"embedui_id_playlist_toggle"},
element_opt:{type:"vector",location:"chansel"},base_sprite:{element_x:0,element_y:0.5,element_w:0.08,element_h:0,display_type:"timeout",timeout_delay:999E3}};b.embedui_create(c);c={embedui_class:"button_bitmap",embedui_id:"embedui_id_record_toggle",userptr:{embedui_id:"embedui_id_record_toggle"},element_opt:{type:"vector",location:"record"},base_sprite:{element_x:1,element_y:0.5,element_w:0.08,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"timeout",timeout_delay:999E3}};b.embedui_create(c);c=
{embedui_class:"text_caption",embedui_id:"embedui_id_track_title",userptr:{embedui_id:"embedui_id_track_title"},element_opt:{text:" ",font_size:0.09765625},base_sprite:{element_x:0.5,element_y:0.8,element_w:1,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"timeout",timeout_delay:4E3,mouse_action:false}};b.embedui_create(c);c={embedui_class:"text_caption",embedui_id:"embedui_id_status_line",userptr:{embedui_id:"embedui_id_status_line"},element_opt:{text:" ",font_size:0.09765625,font_color:16711680},
base_sprite:{element_x:0.5,element_y:0.2,element_w:1,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"timeout",timeout_delay:4E3,mouse_action:false}};b.embedui_create(c);this.m_ezplayer.m_play_post_playlist==false&&this._reinit_playstop_buttons();this.m_ezplayer.webpack_detect_running()==false&&this.webpack_detect_completed_cb()};a=neoip.ezplayer_embedui_t.prototype;
a.destructor=function(){var b=this._get_plugin();b.embedui_delete("embedui_id_root_stage");b.embedui_delete("embedui_id_volume");b.embedui_delete("embedui_id_winsizer");b.embedui_delete("embedui_id_playlist_toggle");b.embedui_delete("embedui_id_record_toggle");b.embedui_delete("embedui_id_track_title");b.embedui_delete("embedui_id_status_line");this._embedui_delete_recorder_pip();this._embedui_delete_playlist_select();this._embedui_delete_nopack_button();this._embedui_delete_play();this._embedui_delete_stop();
this._embedui_delete_busy()};a._sound_init_from_cookie=function(){var b=this._get_plugin(),c=this.m_ezplayer.cfgvar_arr();if(c.onload_force_mute=="1")b.set_sound_mute(true);else(c=neoip.core.cookie_read("ezplayer_sound_mute"))&&b.set_sound_mute(Number(c));(c=neoip.core.cookie_read("ezplayer_sound_vol"))&&b.set_sound_vol(c)};a._get_plugin=function(){return document.getElementById(this.m_ezplayer.m_subplayer_html_id)};
a.embedui_event_cb=function(b,c){var d=c.userptr;d=d.embedui_id;if(d=="embedui_id_root_stage")return this._embedui_root_stage_cb(b,c);else if(d=="embedui_id_volume")return this._embedui_button_vol_cb(b,c);else if(d=="embedui_id_winsizer")return this._embedui_button_winsizer_cb(b,c);else if(d=="embedui_id_play"&&b=="click")return this.m_ezplayer.playing_start();else if(d=="embedui_id_stop"&&b=="click")return this.m_ezplayer.playing_stop();else if(d=="embedui_id_playlist_toggle")return this._embedui_playlist_toggle_cb(b,
c);else if(d=="embedui_id_record_toggle")return this._embedui_record_toggle_cb(b,c);else if(d=="embedui_id_playlist_select")return this._embedui_playlist_select_cb(b,c);else if(d=="embedui_id_nopack_button")return this._embedui_nopack_button_cb(b,c);return-1};
a._embedui_button_vol_cb=function(b,c){var d="embedui_id_volume",e=this._get_plugin();if(b=="click"){e.set_sound_mute(!e.get_sound_mute());neoip.core.cookie_write("ezplayer_sound_mute",Number(e.get_sound_mute()),30);e.embedui_update(d,{action:"element_update_opt",arg:{sound_mute:e.get_sound_mute()}})}if(b=="mouseWheel"){b=c.wheel_delta*0.1;b=e.get_sound_vol()+b;b=Math.max(b,0);b=Math.min(b,1);e.set_sound_vol(b);neoip.core.cookie_write("ezplayer_sound_vol",e.get_sound_vol(),30);e.embedui_update(d,
{action:"element_update_opt",arg:{sound_vol:e.get_sound_vol()}})}};a._embedui_button_winsizer_cb=function(b){var c="embedui_id_winsizer",d=this._get_plugin(),e=d.may_fullscreen();b=="click"&&e&&d.set_fullscreen(!d.get_fullscreen());b=d.get_fullscreen();var g=d.getAttribute("width")=="100%";e=e?b:g;d.embedui_update(c,{action:"element_update_opt",arg:{location:e?"win_normalizer":"win_maximizer"}})};
a._embedui_root_stage_cb=function(b,c){var d="embedui_id_root_stage",e=this._get_plugin();if(b=="doubleClick"&&e.may_fullscreen()){e.set_fullscreen(!e.get_fullscreen());e.embedui_update("embedui_id_winsizer",{action:"element_update_opt",arg:{location:e.get_fullscreen()?"win_normalizer":"win_maximizer"}})}if(b=="changed_state"){c=c.new_state;b=null;if(c=="idle_detect"){e.embedui_update(d,{action:"element_update_opt",arg:{mouse_visibility:"show"}});b="appearing"}else{e.embedui_update(d,{action:"element_update_opt",
arg:{mouse_visibility:"hide"}});b="disappearing"}c=["embedui_id_volume","embedui_id_winsizer","embedui_id_playlist_toggle","embedui_id_record_toggle"];e.embedui_exist(d)==true&&c.push("embedui_id_stop");for(var g=0;g<c.length;g++){d=c[g];e.embedui_update(d,{action:"base_reset_state",arg:{new_state:b}})}}};
a._embedui_playlist_toggle_cb=function(b){var c="embedui_id_playlist_select",d=this._get_plugin();if(b=="click")if(this.m_ezplayer.m_plistarr){d.embedui_exist(c)?this._embedui_delete_playlist_select():this._embedui_create_playlist_select();this._reinit_playstop_buttons()}};
a._embedui_playlist_select_cb=function(b,c){var d=c.selected_idx;b=c.item_userptr;console.info("enter selected_idx="+d);console.dir(c);this._embedui_delete_playlist_select();this._reinit_playstop_buttons();c=this.m_ezplayer.m_plistarr.item_arr()[d];if(c.is_not_playable())this._set_status_line("WebPack Required for "+c.playlist_title());else{this.m_ezplayer.play_post_playlist(true);this.m_ezplayer.change_playlist(b.playlist_uid)}};
a._embedui_create_playlist_select=function(){var b=this._get_plugin(),c="embedui_id_playlist_select";if(b.embedui_exist(c)!=true)if(this.m_ezplayer.m_plistarr!=null){c={embedui_class:"select_list",embedui_id:"embedui_id_playlist_select",userptr:{embedui_id:"embedui_id_playlist_select"},element_opt:{selected_idx:0,item_w:0.48828125,item_h:70/768,box_t:7/1024,margin_w:0.009765625,margin_h:0,font_size:0.05859375,item_arr:["FILLED DYNAMICALLY JUST AFTER"]}};for(var d=[],e=0;e<this.m_ezplayer.m_plistarr.item_arr().length;e++){var g=
this.m_ezplayer.m_plistarr.item_arr()[e];d.push({display_text:g.playlist_title(),color:g.is_playable()?16777215:8421504,item_userptr:{playlist_uid:g.playlist_uid()}})}c.element_opt.item_arr=d;for(e=0;e<this.m_ezplayer.m_plistarr.item_arr().length;e++){g=this.m_ezplayer.m_plistarr.item_arr()[e];if(!g.is_not_playable())if(g.playlist_uid()==this.m_ezplayer.m_playlist_uid){c.element_opt.selected_idx=e;break}}b.embedui_create(c)}};
a._embedui_delete_playlist_select=function(){var b=this._get_plugin(),c="embedui_id_playlist_select";b.embedui_exist(c)!=false&&b.embedui_delete(c)};
a._embedui_record_toggle_cb=function(b){var c=this._get_plugin();console.info("enter");if(b=="click")if(c.embedui_exist("embedui_id_recorder_pip")==true){console.info("stop recording");this._embedui_delete_recorder_pip();this._neoip_recorder_dtor()}else{console.info("start recording");this._embedui_create_recorder_pip();if(b=this._neoip_recorder_ctor()){this._set_status_line("Broadcasting failed:\n"+b);this._embedui_delete_recorder_pip();this._neoip_recorder_dtor()}}};
a._neoip_recorder_ctor=function(){var b=null,c=null;if(b=neoip.core.cookie_read("cast_default")){b=unescape(b);c=JSON.parse(b);b=c.cast_name;c=c.cast_privtext}else{b=" Webcam "+neoip.core.build_nonce_str(3);c=neoip.core.build_nonce_str(8)}b={cast_name:b,cast_privtext:c,scasti_mod:"flv",mdata_srv_uri:neoip.globalCfg.recorder_mdata_srv_uri};c={audio_mute:true,video_bw:49152,audio_bw:16384,video_w:320,video_h:240,video_fps:10};var d=new neoip.recorder_cb_t(this._neoip_recorder_cb,this),e=this.m_ezplayer.m_subplayer_html_id;
this.m_recorder=new neoip.recorder_t(d,e,c,b);return b=this.m_recorder.record_start()};a._neoip_recorder_dtor=function(){if(this.m_recorder!=null){if(this.m_recorder.record_inprogress()){var b=this.m_recorder.casti_param().cast_name;this._set_status_line(b+"\nBroadcasting stopped");this.m_recorder.record_stop()}this.m_recorder.destructor();this.m_recorder=null}};
a._neoip_recorder_cb=function(b,c,d,e){console.info("enter event_type="+d);console.dir(e);if(d=="changed_state"){b=this.m_recorder.casti_param().cast_name;e=b+"\nBroadcasting "+e.new_state;this._set_status_line(e)}};
a._embedui_create_recorder_pip=function(){var b=this._get_plugin(),c="embedui_id_recorder_pip";if(b.embedui_exist(c)!=true){c={embedui_class:"recorder_pip",embedui_id:"embedui_id_recorder_pip",userptr:{embedui_id:"embedui_id_recorder_pip"},element_opt:{force_aspect_ratio:4/3},base_sprite:{element_x:0,element_y:1,element_w:0.33,element_h:0.33,anchor_x:0,anchor_y:0}};b.embedui_create(c)}};
a._embedui_delete_recorder_pip=function(){var b=this._get_plugin(),c="embedui_id_recorder_pip";b.embedui_exist(c)!=false&&b.embedui_delete(c)};a.webpack_detect_completed_cb=function(){console.assert(this.m_ezplayer.webpack_detect_running()==false);if(this.m_ezplayer.webpack_detect_result()!="installed"){this._set_status_line("Limited version");this._set_track_title("Install WebPack\nfor full version");this._embedui_create_nopack_button()}};
a._embedui_nopack_button_cb=function(b){var c="http://urfastr.net/webpack/download";if(b=="click")window.top.location.href=c};
a._embedui_create_nopack_button=function(){var b=this._get_plugin(),c="embedui_id_nopack_button";if(b.embedui_exist(c)!=true){if(this.m_ezplayer.webpack_detect_result()=="toinstall")var d="Install\nWebPack";else if(this.m_ezplayer.webpack_detect_result()=="toupgrade")d="Update\nWebPack";else console.assert(false);c={embedui_class:"button_bitmap",embedui_id:c,userptr:{embedui_id:c},element_opt:{type:"vector",location:"webpack_install",text:d},base_sprite:{element_x:1,element_y:1,element_w:0.2,element_h:0,
display_type:"always"}};b.embedui_create(c)}};a._embedui_delete_nopack_button=function(){var b=this._get_plugin(),c="embedui_id_nopack_button";b.embedui_exist(c)!=false&&b.embedui_delete(c)};
a.neoip_player_cb=function(b,c){this._get_plugin();if(b=="changed_state"&&c.new_state=="playing"){c=this.m_ezplayer.m_player.practical_trackidx();c=this.m_ezplayer.m_player.playlist().track_at(c);c=c.title();this._set_track_title(c)}else if(b=="error"){c=c.reason=="NetStream.Play.StreamNotFound"?"Not broadcasting now.\nretry later":c.reason.replace("."," ","g");this._set_status_line(c)}b=="changed_state"&&this._reinit_playstop_buttons()};
a._set_track_title=function(b){var c=this._get_plugin(),d="embedui_id_track_title";c.embedui_update(d,{action:"base_reset_state",arg:{new_state:"invisible"}});c.embedui_update(d,{action:"element_update_opt",arg:{text:b}});c.embedui_update(d,{action:"base_reset_state",arg:{new_state:"appearing"}})};
a._set_status_line=function(b){var c=this._get_plugin(),d="embedui_id_status_line";c.embedui_update(d,{action:"base_reset_state",arg:{new_state:"invisible"}});c.embedui_update(d,{action:"element_update_opt",arg:{text:b}});c.embedui_update(d,{action:"base_reset_state",arg:{new_state:"appearing"}})};a.playlist_loader_cb=function(){this._reinit_playstop_buttons()};a.playing_start=function(){this._reinit_playstop_buttons()};
a.playing_stop=function(){this._reinit_playstop_buttons();var b=this._get_plugin();b.embedui_update("embedui_id_track_title",{action:"base_reset_state",arg:{new_state:"invisible"}})};
a._reinit_playstop_buttons=function(){var b=this._get_plugin();if(b.embedui_exist("embedui_id_playlist_select")){this._embedui_delete_play();this._embedui_delete_stop();this._embedui_delete_busy()}else{b=this.m_ezplayer.m_player.practical_state();b=="kframefinding"||b=="connecting"?this._embedui_create_busy():this._embedui_delete_busy();if(this.m_ezplayer.m_player.is_playing()){this._embedui_delete_play();this._embedui_create_stop()}else{this._embedui_delete_stop();this._embedui_create_play()}}};
a._embedui_create_play=function(){var b=this._get_plugin(),c="embedui_id_play";if(b.embedui_exist(c)!=true){c={embedui_class:"button_bitmap",embedui_id:c,userptr:{embedui_id:c},element_opt:{type:"vector",location:"play"},base_sprite:{element_x:0.5,element_y:0.5,element_w:0.1,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"always"}};b.embedui_create(c)}};a._embedui_delete_play=function(){var b=this._get_plugin(),c="embedui_id_play";b.embedui_exist(c)!=false&&b.embedui_delete(c)};
a._embedui_create_stop=function(){var b=this._get_plugin(),c="embedui_id_stop";if(b.embedui_exist(c)!=true){c={embedui_class:"button_bitmap",embedui_id:c,userptr:{embedui_id:c},element_opt:{type:"vector",location:"stop"},base_sprite:{element_x:0.5,element_y:0.5,element_w:0.1,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"timeout",timeout_delay:999E3}};b.embedui_create(c)}};a._embedui_delete_stop=function(){var b=this._get_plugin(),c="embedui_id_stop";b.embedui_exist(c)!=false&&b.embedui_delete(c)};
a._embedui_create_busy=function(){var b=this._get_plugin(),c="embedui_id_busy";if(b.embedui_exist(c)!=true){c={embedui_class:"button_busy",embedui_id:c,userptr:{embedui_id:c},base_sprite:{element_x:0.5,element_y:0.5,element_w:0.1,element_h:0,anchor_x:0.5,anchor_y:0.5,display_type:"always"}};b.embedui_create(c)}};a._embedui_delete_busy=function(){var b=this._get_plugin(),c="embedui_id_busy";b.embedui_exist(c)!=false&&b.embedui_delete(c)};neoip.globalCfg={};neoip.globalCfg.dfl_plistarr_uid="plistarr_live";
neoip.globalCfg.plistarr_loader_xdomrpc_url="http://api.urfastr.net/CastMdataSrv2/XDOMRPC";neoip.globalCfg.playlist_loader_xdomrpc_url="http://api.urfastr.net/CastMdataSrv2/XDOMRPC";neoip.globalCfg.recorder_mdata_srv_uri="http://api.urfastr.net/CastMdataSrv2/RPC2";neoip.globalCfg.subplayer_asplayer_swf_url="neoip_asplayer.swf";
neoip.globalCfg.webpack_detect_apps_params={oload:{first_port:4550,last_port:4553,min_version:"0.0.1",options:null},casto:{first_port:4560,last_port:4563,min_version:"0.0.1",options:null},casti:{first_port:4570,last_port:4573,min_version:"0.0.1",options:{hostname:"dedixl.jetienne.com"}}};neoip.globalCfg.playerLocation=null;neoip.geoLocalize(function(b){neoip.globalCfg.playerLocation=b});
function crossframe_msg_t(){function b(d,e,g,i){var k=document.createElement("iframe");k.style.visibility="hidden";k.style.position="absolute";k.style.top=k.style.left="0";k.style.width=k.style.height="0";k.addEventListener("load",function(){k.removeEventListener("load",arguments.callee,false);setTimeout(function(){document.body.removeChild(k)},1E3)},false);d="iframe_dst="+escape(g)+"&message="+escape(d)+"&domain="+escape(document.domain)+"&uri="+escape(location.href)+"&listener_obj="+escape(i);console.info("send "+
d);console.info("proxy_uri="+e);k.src=e+"#"+d;document.body.appendChild(k)}var c=function(){var d=null;function e(i){d=i}function g(i,k,m){d===null&&console.info("There was no function subscribed to the event!");d!==null&&d(i,k,m)}return{bind:e,trigger:g}}();return{send:b,event:c}}if(!crossframe)var crossframe={};
crossframe.rpc_client_t=function(b){var c=b||{},d={},e=new crossframe_msg_t;window[c.resp_addr.listener_obj]=e;function g(){var i={};i.resp_addr=b.resp_addr;i.method_name=arguments[0];i.nonce=Math.random();i.args=[];for(var k=1;k<arguments.length;k++)k==arguments.length&&typeof arguments[k]=="function"||i.args.push(arguments[k]);k=typeof arguments[arguments.length-1]=="function"?arguments[arguments.length-1]:null;d[i.nonce]={call_ctx:i,callback:k};console.info("rpc call");console.dir(i);console.info("in json:"+
JSON.stringify(i));i="rpc_call("+JSON.stringify(i)+")";console.log("sending '"+i+"' to "+c.dest_addr.iframe_dst);e.send(i,c.dest_addr.proxyUrl,c.dest_addr.iframe_dst,c.dest_addr.listener_obj)}e.event.bind(function(i){rpc_resp_match=i.match(/^rpc_resp\((.*)\)/);if(rpc_resp_match!==null){console.info("received a RPC reply");i=JSON.parse(rpc_resp_match[1]);console.dir(i);if(i.nonce in d){console.info("expected rpc_resp");var k=d[i.nonce];delete d[i.nonce];k.callback&&k.callback(i)}else console.info("received a unexpected rpc_resp...")}});
return{call:g}};
crossframe.rpc_server_t=function(b){b=b||{};var c={},d=new crossframe_msg_t;window[b.listener_obj]=d;function e(g,i){c[g]=i}d.event.bind(function(g){rpc_call_match=g.match(/^rpc_call\((.*)\)/);if(rpc_call_match!=null){console.info("received a RPC call");g=JSON.parse(rpc_call_match[1]);var i={nonce:g.nonce,result:null,fault:null};try{if(!(g.method_name in c))throw"Unknown method name";var k=c[g.method_name];i.result=k.apply(null,g.args)}catch(m){i.fault=m}k="rpc_resp("+JSON.stringify(i)+")";d.send(k,
g.resp_addr.proxyUrl,g.resp_addr.iframe_dst,g.resp_addr.listener_obj);console.dir(g)}});return{register:e}};
neoip.ezplayer_widget_t=function(){var b="",c="",d="",e=neoip.core.download_file_insync("../../cgi-bin/server_date.php",true),g="";if(neoip.globalCfg.dfl_plistarr_uid=="plistarr_live"&&b!=""&&c!="")g=neoip.globalCfg.dfl_plistarr_uid+"/"+b+"_"+c+".playlist_jspf";else if(neoip.globalCfg.dfl_plistarr_uid=="plistarr_play"&&d!="")g=neoip.globalCfg.dfl_plistarr_uid+"/"+d+".playlist.jspf";b=this._parse_cfgvar_arr();console.dir(b);this.m_ezplayer=new neoip.ezplayer_t(b,neoip.ezplayer_cb_t(this._neoip_ezplayer_cb,
this));this.m_ezplayer.set_server_date(e*1E3);if(g!="")this.m_ezplayer.change_playlist(g);else{e=neoip.globalCfg.dfl_plistarr_uid;this.m_ezplayer.load_plistarr(e)}this.m_ezplayer.start();this._rpc_server_ctor();if(b.api_addEventListener){e=JSON.parse(unescape(b.api_addEventListener));this._rpc_client_ctor(e)}};a=neoip.ezplayer_widget_t.prototype;a.destructor=function(){};
a._parse_cfgvar_arr=function(){var b=neoip.core.doc_urivar_arr(),c={onload_start_play:"enabled",fullpage_state:"maximized"};for(var d in b)if(/^neoip_var_/.test(d)!=false){stripped_key=/^neoip_var_(.*)/.exec(d)[1];c[stripped_key]=b[d]}return c};a._neoip_ezplayer_cb=function(b,c,d,e){console.info("enter_type="+d);console.dir(e);this.m_rpc_client&&this.m_rpc_client.call("event_notification",d,e)};a._rpc_client_ctor=function(b){console.assert(!this.m_rpc_client);this.m_rpc_client=new crossframe.rpc_client_t(b)};
a._rpc_server_ctor=function(){this.m_rpc_server=new crossframe.rpc_server_t({listener_obj:"crossframe_msg_rpc_server_page"});var b=this.m_ezplayer;this.m_rpc_server.register("addEventListener",function(c){console.info("rpc_server addEventListener");this._rpc_client_ctor(c)});this.m_rpc_server.register("playing_start",function(){console.info("rpc_server playing start");b.playing_start()});this.m_rpc_server.register("playing_stop",function(){console.info("rpc_server playing stop");b.playing_stop()});
this.m_rpc_server.register("is_playing",function(){console.info("rpc_server is_playing");return b.is_playing()});this.m_rpc_server.register("plistarr_get",function(){console.info("rpc_server plistarr_get");var c=b.plistarr_get();return c.raw_data()});this.m_rpc_server.register("webpack_status",function(){console.info("rpc_server webpack_status");return b.webpack_detect_result()});this.m_rpc_server.register("change_playlist",function(c){console.info("rpc_server change_playlist");b.change_playlist(c)})};
new neoip.ezplayer_widget_t;
</script></body>
</html>
