if(!this.JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();var crossframe_msg_t=function(){var c=function(i,j,a,l){var k=document.createElement("iframe");k.style.visibility="hidden";k.style.position="absolute";k.style.top=k.style.left="0";k.style.width=k.style.height="0";k.addEventListener("load",function(){k.removeEventListener("load",arguments.callee,false);setTimeout(function(){document.body.removeChild(k)},1000)},false);var b="iframe_dst="+escape(a)+"&message="+escape(i)+"&domain="+escape(document.domain)+"&uri="+escape(location.href)+"&listener_obj="+escape(l);k.src=j+"#"+b;document.body.appendChild(k)};var d=(function(){var a=null;var b=function(e){a=e};var f=function(e,i,j){if(a===null){}if(a===null){return}a(e,i,j)};return{bind:b,trigger:f}})();return{send:c,event:d}};if(!crossframe){var crossframe={}}crossframe.rpc_client_t=function(g){var i=g||{};var j={};var f=new crossframe_msg_t();window[i.resp_addr.listener_obj]=f;var h=function(){var a={};a.resp_addr=g.resp_addr;a.method_name=arguments[0];a.nonce=Math.random();a.args=[];for(var d=1;d<arguments.length;d++){if(d==arguments.length&&typeof arguments[d]=="function"){continue}a.args.push(arguments[d])}var b=typeof arguments[arguments.length-1]=="function"?arguments[arguments.length-1]:null;j[a.nonce]={call_ctx:a,callback:b};console.info("in json:"+JSON.stringify(a));var c="rpc_call("+JSON.stringify(a)+")";f.send(c,i.dest_addr.proxyUrl,i.dest_addr.iframe_dst,i.dest_addr.listener_obj)};f.event.bind(function(a,c,d){rpc_resp_match=a.match(/^rpc_resp\((.*)\)/);if(rpc_resp_match===null){return}var e=JSON.parse(rpc_resp_match[1]);if(!(e.nonce in j)){return}var b=j[e.nonce];delete j[e.nonce];if(b.callback){b.callback(e)}});return{call:h}};if(!crossframe){var crossframe={}}crossframe.rpc_server_t=function(g){var j=g||{};var h={};var f=new crossframe_msg_t();window[j.listener_obj]=f;var i=function(a,b){h[a]=b};f.event.bind(function(c,n,o){rpc_call_match=c.match(/^rpc_call\((.*)\)/);if(rpc_call_match==null){return}var a=JSON.parse(rpc_call_match[1]);var p={nonce:a.nonce,result:null,fault:null};try{if(!(a.method_name in h)){throw"Unknown method name"}var b=h[a.method_name];p.result=b.apply(null,a.args)}catch(d){p.fault=d}var e="rpc_resp("+JSON.stringify(p)+")";f.send(e,a.resp_addr.proxyUrl,a.resp_addr.iframe_dst,a.resp_addr.listener_obj)});return{register:i}};var urfastr_live=function(a){var f={player_url:"http://player.urfastr.net/live",width:"320",height:"240",event_cb:null,neoip_var_arr:{widget_src:"api_js",onload_start_play:"enabled"}};var e="urfastr_live_frame_"+Math.floor(Math.random()*100000);var g=null;var h=null;var i={dest_addr:{proxyUrl:a.crossframe_proxyUrl,listener_obj:"crossframe_msg_rpc_server_"+e,iframe_dst:"parent"},resp_addr:{proxyUrl:"http://localhost/~jerome/neoip_html/lib/crossframe/crossframe_proxy.html",listener_obj:"crossframe_msg_event_listener_page",iframe_dst:"frames['"+e+"']"}};var m=function(){for(key in f){if(a[key]!==undefined){continue}a[key]=f[key]}if(typeof crossframe==="undefined"){return}g=new crossframe.rpc_client_t({dest_addr:{proxyUrl:"http://localhost/~jerome/neoip_html/lib/crossframe/crossframe_proxy.html",listener_obj:"crossframe_msg_rpc_server_page",iframe_dst:"frames['"+e+"']"},resp_addr:{proxyUrl:a.crossframe_proxyUrl,listener_obj:"crossframe_msg_rpc_client_"+e,iframe_dst:"parent"}});if(a.event_cb){j();a.neoip_var_arr.api_addEventListener=JSON.stringify(i)}};var o=function(s,r){console.info("99999999999event notified event_type="+s);console.dir(r);if(a.event_cb){a.event_cb(s,r)}};var j=function(){if(h){return}h=new crossframe.rpc_server_t({listener_obj:"crossframe_msg_rpc_server_"+e});h.register("event_notification",o)};var n=function(){l();var u="";for(key in a.neoip_var_arr){if(u.length){u+="&"}u+="neoip_var_"+escape(key)+"="+escape(a.neoip_var_arr[key])}console.info("iframe_src"+u);var t=a.player_url;if(u.length){t+="?"+u}var r=document.createElement("iframe");r.setAttribute("src",t);r.setAttribute("width",a.width);r.setAttribute("height",a.height);r.setAttribute("frameborder","no");r.setAttribute("frameborder","no");r.setAttribute("id",e);r.setAttribute("name",e);var s=document.getElementById(a.container_id);s.appendChild(r)};var l=function(){var r=document.getElementById(a.container_id);while(r.hasChildNodes()){r.removeChild(r.lastChild)}};var c=function(r){a.event_cb=r;if(!h){j();g.call("addEventListener",i)}};var b=function(){console.assert(g);g.call("playing_start")};var p=function(){console.assert(g);g.call("playing_stop")};var k=function(r){console.assert(g);g.call("is_playing",function(s){r(s)})};var q=function(r){console.assert(g);g.call("plistarr_get",function(s){r(s)})};var d=function(r){console.assert(g);g.call("webpack_status",function(s){r(s)})};m();return{build:n,destroy:l,event_cb_set:c,playing_start:b,playing_stop:p,is_playing:k,plistarr_get:q,webpack_status:d}};